"use strict";(self.webpackChunkdocusaurus_code=self.webpackChunkdocusaurus_code||[]).push([[8800],{56778:(e,n,l)=>{l.d(n,{A:()=>t});l(96540);var s=l(18215);const i={tabItem:"tabItem_Ymn6"};var r=l(74848);function t(e){let{children:n,hidden:l,className:t}=e;return(0,r.jsx)("div",{role:"tabpanel",className:(0,s.A)(i.tabItem,t),hidden:l,children:n})}},37244:(e,n,l)=>{l.d(n,{A:()=>k});var s=l(96540),i=l(18215),r=l(44319),t=l(56347),a=l(94280),c=l(73024),o=l(58417),d=l(44031);function h(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function x(e){const{values:n,children:l}=e;return(0,s.useMemo)((()=>{const e=n??function(e){return h(e).map((e=>{let{props:{value:n,label:l,attributes:s,default:i}}=e;return{value:n,label:l,attributes:s,default:i}}))}(l);return function(e){const n=(0,o.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,l])}function u(e){let{value:n,tabValues:l}=e;return l.some((e=>e.value===n))}function j(e){let{queryString:n=!1,groupId:l}=e;const i=(0,t.W6)(),r=function(e){let{queryString:n=!1,groupId:l}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!l)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return l??null}({queryString:n,groupId:l});return[(0,c.aZ)(r),(0,s.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(i.location.search);n.set(r,e),i.replace({...i.location,search:n.toString()})}),[r,i])]}function _(e){const{defaultValue:n,queryString:l=!1,groupId:i}=e,r=x(e),[t,c]=(0,s.useState)((()=>function(e){let{defaultValue:n,tabValues:l}=e;if(0===l.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!u({value:n,tabValues:l}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${l.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const s=l.find((e=>e.default))??l[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:r}))),[o,h]=j({queryString:l,groupId:i}),[_,b]=function(e){let{groupId:n}=e;const l=function(e){return e?`docusaurus.tab.${e}`:null}(n),[i,r]=(0,d.Dv)(l);return[i,(0,s.useCallback)((e=>{l&&r.set(e)}),[l,r])]}({groupId:i}),p=(()=>{const e=o??_;return u({value:e,tabValues:r})?e:null})();(0,a.A)((()=>{p&&c(p)}),[p]);return{selectedValue:t,selectValue:(0,s.useCallback)((e=>{if(!u({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);c(e),h(e),b(e)}),[h,b,r]),tabValues:r}}var b=l(46916);const p={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=l(74848);function m(e){let{className:n,block:l,selectedValue:s,selectValue:t,tabValues:a}=e;const c=[],{blockElementScrollPositionUntilNextRender:o}=(0,r.a_)(),d=e=>{const n=e.currentTarget,l=c.indexOf(n),i=a[l].value;i!==s&&(o(n),t(i))},h=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const l=c.indexOf(e.currentTarget)+1;n=c[l]??c[0];break}case"ArrowLeft":{const l=c.indexOf(e.currentTarget)-1;n=c[l]??c[c.length-1];break}}n?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":l},n),children:a.map((e=>{let{value:n,label:l,attributes:r}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:s===n?0:-1,"aria-selected":s===n,ref:e=>c.push(e),onKeyDown:h,onClick:d,...r,className:(0,i.A)("tabs__item",p.tabItem,r?.className,{"tabs__item--active":s===n}),children:l??n},n)}))})}function O(e){let{lazy:n,children:l,selectedValue:r}=e;const t=(Array.isArray(l)?l:[l]).filter(Boolean);if(n){const e=t.find((e=>e.props.value===r));return e?(0,s.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:t.map(((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==r})))})}function f(e){const n=_(e);return(0,g.jsxs)("div",{className:(0,i.A)("tabs-container",p.tabList),children:[(0,g.jsx)(m,{...n,...e}),(0,g.jsx)(O,{...n,...e})]})}function k(e){const n=(0,b.A)();return(0,g.jsx)(f,{...e,children:h(e.children)},String(n))}},58226:(e,n,l)=>{l.d(n,{a:()=>_});var s=l(96540),i=l(72774),r=l(63051),t=l(28968),a=l(48875),c=l(44676),o=l(47859),d=l(4671),h=l(99343),x=l(7324),u=l(39781),j=l(74848);const _=(0,s.memo)((e=>{let{open:n,fullScreen:l=!1,title:a,maxWidth:_="md",onClose:p,children:g}=e;const[m,O]=(0,s.useState)(l),f=(0,s.useCallback)((()=>{O((e=>!e))}),[]);return(0,j.jsxs)(r.A,{open:n,onClose:p,fullScreen:m,TransitionComponent:b,maxWidth:_,children:[(0,j.jsx)(i.A,{sx:{position:"relative"},children:(0,j.jsxs)(c.A,{children:[(0,j.jsx)(o.A,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:a}),(0,j.jsx)(d.A,{onClick:f,style:{color:"white"},children:m?(0,j.jsx)(x.A,{}):(0,j.jsx)(h.A,{})}),(0,j.jsx)(d.A,{"aria-label":"close",onClick:p,style:{color:"white"},children:(0,j.jsx)(u.A,{})})]})}),(0,j.jsx)(t.A,{children:g})]})})),b=s.forwardRef((function(e,n){return(0,j.jsx)(a.A,{direction:"up",ref:n,...e})}))},47389:(e,n,l)=>{l.d(n,{l:()=>a});var s=l(96540),i=l(67512),r=l(58226),t=l(74848);const a=(0,s.memo)((e=>{let{buttonText:n,fullScreen:l=!1,title:a=n,variant:c="outlined",large:o=!1,maxWidth:d,useOriginalText:h=!0,children:x}=e;const[u,j]=(0,s.useState)(!1),_=(0,s.useCallback)((e=>{j(!0),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),[]),b=(0,s.useCallback)((()=>{j(!1)}),[]),p=h?{textTransform:"none"}:{};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.A,{"data-is-view-more-button":"true",onClick:_,variant:c,size:o?"large":"small",style:p,children:n}),(0,t.jsx)(r.a,{open:u,onClose:b,title:a,maxWidth:d,fullScreen:l,children:x})]})}))},26910:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>u,contentTitle:()=>x,default:()=>b,frontMatter:()=>h,metadata:()=>s,toc:()=>j});const s=JSON.parse('{"id":"query/object-fetcher/association","title":"\u5173\u8054\u5c5e\u6027","description":"\u5728\u4e0a\u4e00\u7bc7\u6587\u6863\u4e2d\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86\u6807\u91cf\u5c5e\u6027\u7684\u6293\u53d6\uff0c\u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u8ba8\u8bba\u5173\u8054\u5c5e\u6027\u7684\u6293\u53d6\u3002","source":"@site/i18n/zh/docusaurus-plugin-content-docs/current/query/object-fetcher/association.mdx","sourceDirName":"query/object-fetcher","slug":"/query/object-fetcher/association","permalink":"/jimmer-doc/zh/docs/query/object-fetcher/association","draft":false,"unlisted":false,"editUrl":"https://github.com/babyfish-ct/jimmer-doc/edit/main/i18n/zh/docusaurus-plugin-content-docs/current/query/object-fetcher/association.mdx","tags":[],"version":"current","lastUpdatedAt":1731341376000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"\u5173\u8054\u5c5e\u6027"},"sidebar":"tutorialSidebar","previous":{"title":"\u666e\u901a\u5c5e\u6027","permalink":"/jimmer-doc/zh/docs/query/object-fetcher/props"},"next":{"title":"\u9012\u5f52\u67e5\u8be2","permalink":"/jimmer-doc/zh/docs/query/object-fetcher/recursive"}}');var i=l(74848),r=l(28453),t=l(37244),a=l(56778),c=l(47389);function o(e){const n={a:"a",code:"code",li:"li",p:"p",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["\u8bfb\u8005\u53ef\u4ee5\u5148\u5ffd\u7565",(0,i.jsx)(n.code,{children:"\u8fc7\u6ee4\u5668"}),"\u8fd9\u4e2a\u6982\u5ff5\uff0c\u5b83\u53ea\u662f\u8ba9\u672c\u6587\u4fdd\u6301\u9ad8\u5ea6\u4e25\u8c28\u7684\u58f0\u660e\uff0c\u800c\u4e0d\u662f\u8fd9\u91cc\u8981\u8ba8\u8bba\u7684\u5185\u5bb9\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u60f3\u8981\u4e86\u89e3\uff0c\u5b83\u5305\u542b\u4e24\u4e2a\u90e8\u5206\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#%E5%B1%9E%E6%80%A7%E8%BF%87%E6%BB%A4%E5%99%A8",children:"\u672c\u6587\u6700\u540e\u4e00\u7ae0\uff1a\u5c5e\u6027\u8fc7\u6ee4\u5668"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"../global-filter",children:"\u5168\u5c40\u8fc7\u6ee4\u5668"})}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}const h={sidebar_position:3,title:"\u5173\u8054\u5c5e\u6027"},x=void 0,u={},j=[{value:"\u6293\u53d6\u53ea\u6709id\u7684\u5173\u8054\u5bf9\u8c61",id:"\u6293\u53d6\u53ea\u6709id\u7684\u5173\u8054\u5bf9\u8c61",level:2},{value:"\u591a\u5bf9\u4e00: Book.store",id:"\u591a\u5bf9\u4e00-bookstore",level:3},{value:"\u591a\u5bf9\u591a: Book.authors",id:"\u591a\u5bf9\u591a-bookauthors",level:3},{value:"\u6293\u53d6\u590d\u6742\u7684\u5173\u8054\u5bf9\u8c61",id:"\u6293\u53d6\u590d\u6742\u7684\u5173\u8054\u5bf9\u8c61",level:2},{value:"\u591a\u5bf9\u4e00: Book.store",id:"\u591a\u5bf9\u4e00-bookstore-1",level:3},{value:"\u591a\u5bf9\u591a: Book.authors",id:"\u591a\u5bf9\u591a-bookauthors-1",level:3},{value:"\u6293\u53d6\u5355\u8868\u6240\u6709\u5b57\u6bb5",id:"\u6293\u53d6\u5355\u8868\u6240\u6709\u5b57\u6bb5",level:2},{value:"\u5173\u8054\u5bf9\u8c61\u7684\u7279\u6b8a\u914d\u7f6e",id:"\u5173\u8054\u5bf9\u8c61\u7684\u7279\u6b8a\u914d\u7f6e",level:2},{value:"BatchSize",id:"batchsize",level:3},{value:"\u5173\u8054\u7ea7\u5206\u9875",id:"\u5173\u8054\u7ea7\u5206\u9875",level:3},{value:"\u5c5e\u6027\u8fc7\u6ee4\u5668",id:"\u5c5e\u6027\u8fc7\u6ee4\u5668",level:3}];function _(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["\u5728",(0,i.jsx)(n.a,{href:"./props",children:"\u4e0a\u4e00\u7bc7\u6587\u6863"}),"\u4e2d\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86\u6807\u91cf\u5c5e\u6027\u7684\u6293\u53d6\uff0c\u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u8ba8\u8bba\u5173\u8054\u5c5e\u6027\u7684\u6293\u53d6\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"ORM\u6709\u4e24\u79cd\u5173\u8054\u5c5e\u6027\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5f15\u7528\u5173\u8054\uff1a\u5173\u8054\u5230\u5355\u4e2a\u5bf9\u8c61*(\u6216null)*\uff0c\u5c5e\u6027\u8fd4\u56de\u7c7b\u578b\u4e3a\u5b9e\u4f53\u5bf9\u8c61\uff0c\u7528\u4e8e\u8868\u8fbe\u4e00\u5bf9\u4e00\u548c\u591a\u5bf9\u4e00\u5173\u8054\u3002"}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["\u672c\u6587\u7528\u591a\u5bf9\u4e00\u5173\u8054\u5c5e\u6027",(0,i.jsx)(n.code,{children:"Book.store"}),"\u4e3a\u4f8b\u3002"]})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u96c6\u5408\u5173\u8054\uff1a\u5173\u8054\u5230\u591a\u4e2a\u5bf9\u8c61\uff0c\u5c5e\u6027\u8fd4\u56de\u7c7b\u578b\u4e3a\u5b9e\u4f53\u96c6\u5408\uff0c\u7528\u4e8e\u8868\u8fbe\u4e00\u5bf9\u591a\u548c\u591a\u5bf9\u591a\u5173\u8054\u3002"}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["\u672c\u6587\u7528\u591a\u5bf9\u591a\u5173\u8054\u5c5e\u6027",(0,i.jsx)(n.code,{children:"Book.authors"}),"\u4e3a\u4f8b\u3002"]})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u6293\u53d6\u53ea\u6709id\u7684\u5173\u8054\u5bf9\u8c61",children:"\u6293\u53d6\u53ea\u6709id\u7684\u5173\u8054\u5bf9\u8c61"}),"\n",(0,i.jsxs)(n.p,{children:["\u4e0d\u5e26\u4efb\u4f55\u53c2\u6570\u6293\u53d6\u5173\u8054\u5bf9\u8c61\u65f6\uff0c\u5f97\u5230\u7684\u5173\u8054\u5bf9\u8c61\u53ea\u6709",(0,i.jsx)(n.code,{children:"id"}),"\u5c5e\u6027\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"\u591a\u5bf9\u4e00-bookstore",children:"\u591a\u5bf9\u4e00: Book.store"}),"\n",(0,i.jsxs)(t.A,{groupId:"language",children:[(0,i.jsx)(a.A,{value:"java",label:"Java",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"BookTable book = Tables.BOOK_TABLE;\nList<Book> list = sqlClient.createQuery(book)\n    .where(book.edition().eq(3))\n    .select(\n        book.fetch(\n            Fetchers.BOOK_FETCHER\n                .allScalarFields()\n                // highlight-next-line\n                .store()\n        )\n    )\n    .execute();\nSystem.out.println(toJson(list));\n"})})}),(0,i.jsx)(a.A,{value:"kotlin",label:"Kotlin",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"val books = sqlClient\n.createQuery(Book::class) {\n    where(table.edition.eq(3))\n    select(\n        table.fetchBy {\n            allScalarFields()\n            // highlight-next-line\n            store()\n        }\n    )\n}\n.execute()\n"})})})]}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u91cc\uff0c",(0,i.jsx)(n.code,{children:"store()"}),"\u8868\u793a\u5bf9\u591a\u5bf9\u4e00\u5173\u8054\u8fdb\u884c\u6293\u53d6\u3002\u6211\u4eec\u5e76\u672a\u4e3a",(0,i.jsx)(n.code,{children:"store()"}),"\u6307\u5b9a\u4efb\u4f55\u53c2\u6570\uff0c\u8fd9\u8868\u793a\u53ea\u6293\u53d6\u5173\u8054\u5bf9\u8c61\u7684id\u5c5e\u6027\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u751f\u6210\u5982\u4e0bSQL\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"select\n    tb_1_.ID,\n    tb_1_.NAME,\n    tb_1_.EDITION,\n    tb_1_.PRICE,\n    tb_1_.STORE_ID\nfrom BOOK tb_1_\nwhere tb_1_.EDITION = ?\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u56e0\u4e3a\u591a\u5bf9\u4e00\u5173\u8054",(0,i.jsx)(n.code,{children:"Book.store"}),"\u57fa\u4e8e\u771f\u5b9e\u5916\u952e\uff0c\u6240\u4ee5\u5f53\u524d\u8868",(0,i.jsx)(n.code,{children:"BOOK"}),"\u7684\u5916\u952e",(0,i.jsx)(n.code,{children:"STORE_ID"}),"\u5c31\u662f\u7236\u5bf9\u8c61\u7684id\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u7531\u4e8e",(0,i.jsx)(n.code,{children:"store()"}),"\u6293\u53d6\u53ea\u6709id\u5c5e\u6027\u7684\u5173\u8054\u5bf9\u8c61\uff0c\u6240\u4ee5\uff0c\u65e0\u9700\u989d\u5916\u7684SQL\u67e5\u8be2\uff0c\u5373\u53ef\u6839\u636e\u5f53\u524d\u6570\u636e\u7684\u5916\u952e\u76f4\u63a5\u6784\u5efa\u53ea\u6709id\u5c5e\u6027\u7684\u7236\u5bf9\u8c61\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u8f93\u51fa\u7684\u8fd4\u56de\u503c\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n    {\n        "id": 3,\n        "name": "Learning GraphQL",\n        "edition": 3,\n        "price": 51.00,\n        // highlight-next-line\n        "store": {\n            "id": 1\n        }\n    },\n    ...\u7701\u7565\u5176\u4ed6\u5bf9\u8c61...\n]\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u591a\u5bf9\u591a-bookauthors",children:"\u591a\u5bf9\u591a: Book.authors"}),"\n",(0,i.jsxs)(t.A,{groupId:"language",children:[(0,i.jsx)(a.A,{value:"java",label:"Java",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"BookTable book = Tables.BOOK_TABLE;\n\nList<Book> books = sqlClient\n    .createQuery(book)\n    .select(\n        book.fetch(\n            Fetchers.BOOK_FETCHER.\n                .allScalarFields()\n                // highlight-next-line\n                .authors()\n        )\n    )\n    .execute();\n"})})}),(0,i.jsx)(a.A,{value:"kotlin",label:"Kotlin",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"val books = sqlClient\n    .createQuery(Book::class) {\n        where(table.edition.eq(3))\n        select(\n            table.fetchBy {\n                allScalarFields()\n                // highlight-next-line\n                authors()\n            }\n        )\n    }\n    .execute()\n"})})})]}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u91cc\uff0c",(0,i.jsx)(n.code,{children:"authors()"}),"\u8868\u793a\u5bf9\u591a\u5bf9\u591a\u5173\u8054\u8fdb\u884c\u6293\u53d6\u3002\u6211\u4eec\u5e76\u672a\u4e3a",(0,i.jsx)(n.code,{children:"authors()"}),"\u6307\u5b9a\u4efb\u4f55\u53c2\u6570\uff0c\u8fd9\u8868\u793a\u53ea\u6293\u53d6\u5173\u8054\u5bf9\u8c61\u7684id\u5c5e\u6027\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u751f\u6210\u4e24\u6761SQL:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u67e5\u8be2",(0,i.jsx)(n.code,{children:"Book"}),"\u5bf9\u8c61\u672c\u8eab"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"select \n    tb_1_.ID, \n    tb_1_.NAME, \n    tb_1_.EDITION, \n    tb_1_.PRICE\nfrom BOOK as tb_1_ \nwhere tb_1_.EDITION = ?\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u6839\u636e\u5173\u8054",(0,i.jsx)(n.code,{children:"Book.authors"}),"\uff0c\u4e3a\u4e0a\u4e00\u6b65\u67e5\u8be2\u7684\u6240\u6709\u6839\u5bf9\u8c61\u67e5\u8be2\u4ec5\u5305\u542bid\u7684",(0,i.jsx)(n.code,{children:"Author"}),"\u5173\u8054\u5bf9\u8c61"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"select \n    tb_1_.BOOK_ID, /* batch-map key */\n    tb_1_.AUTHOR_ID /* batch-map value */\nfrom BOOK_AUTHOR_MAPPING as tb_1_ \n    where tb_1_.BOOK_ID in (?, ?, ?, ?)\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u4e2a\u4f8b\u5b50\u8bf4\u660e\u4e86\u4ee5\u4e0b\u95ee\u9898"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5f53\u524d\u67e5\u8be2\u4ec5\u9700\u8981\u5173\u8054\u5bf9\u8c61\u7684id\uff0c\u4e5f\u6ca1\u6709\u4f7f\u7528\u8fc7\u6ee4\u5668\uff08\u8fc7\u6ee4\u5668\u662f\u540e\u6587\u5c06\u4f1a\u8bb2\u89e3\u7684\u6982\u5ff5\uff09\u3002"}),"\n",(0,i.jsxs)(n.p,{children:["Jimmer\u4f1a\u5bf9\u8fd9\u79cd\u60c5\u51b5\u8fdb\u884c\u4f18\u5316\uff0c\u4ec5\u4ec5\u67e5\u8be2\u4e2d\u95f4\u8868",(0,i.jsx)(n.code,{children:"BOOK_AUTHOR_MAPPING"}),"\uff0c\u4e0d\u67e5\u8be2",(0,i.jsx)(n.code,{children:"AUTHOR"}),"\u8868\uff0c\u56e0\u4e3a\u4e2d\u95f4\u8868\u5df2\u7ecf\u5305\u542b\u4e86\u5173\u8054\u5bf9\u8c61\u7684id\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"where tb_1_.BOOK_ID in (?, ?, ?, ?)"}),"\u662f\u6279\u91cf\u67e5\u8be2\uff0c\u8fd9\u662f\u56e0\u4e3a\u7b2c\u4e00\u6761\u67e5\u8be2\u8fd4\u56de\u4e3b\u5bf9\u8c61\u67094\u4e2a\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["Jimmer\u4f7f\u7528\u6279\u91cf\u67e5\u8be2\u6765\u89e3\u51b3",(0,i.jsx)(n.code,{children:"N + 1"}),"\u95ee\u9898\uff0c\u8fd9\u70b9\u548cGraphQL\u7684",(0,i.jsx)(n.code,{children:"DataLoader"}),"\u4e00\u6837\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5f53\u4e00\u4e2a\u6279\u6b21\u7684\u5217\u8868\u8fc7\u4e8e\u592a\u957f\u540e\uff0cjimmer-sql\u4f1a\u5bf9\u8fdb\u884c\u5206\u6279\u5207\u5272\uff0c\u8fd9\u4f1a\u5728\u540e\u6587\u7684",(0,i.jsx)(n.a,{href:"#batchsize",children:"BatchSize\u8282"}),"\u4e2d\u8bb2\u89e3\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Jimmer\u901a\u8fc7\u989d\u5916\u7684SQL\u53bb\u67e5\u8be2\u5173\u8054\u5bf9\u8c61\uff0c\u800c\u975e\u5728\u4e3b\u67e5\u8be2\u7684SQL\u4e2d\u4f7f\u7528LEFT JOIN\u6293\u53d6\u5173\u8054\u5bf9\u8c61\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u6837\u8bbe\u8ba1\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u9632\u6b62\u5bf9\u96c6\u5408\u5173\u8054\u8fdb\u884cJOIN\u5bfc\u81f4\u67e5\u8be2\u7ed3\u679c\u91cd\u590d\uff0c\u56e0\u4e3a\u8fd9\u79cd\u6570\u636e\u91cd\u590d\u5bf9\u805a\u5408\u6839\u5206\u9875\u67e5\u8be2\u6709\u6bc1\u706d\u6027\u7684\u7834\u574f\u6548\u679c\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u6253\u5370\u7684\u7ed3\u679c\u5982\u4e0b\uff08\u539f\u8f93\u51fa\u662f\u7d27\u51d1\u7684\uff0c\u4e3a\u4e86\u65b9\u4fbf\u9605\u8bfb\uff0c\u8fd9\u91cc\u8fdb\u884c\u4e86\u683c\u5f0f\u5316\uff09:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n    {\n        "id":3,\n        "name":"Learning GraphQL",\n        "edition":3,\n        "price":51.00,\n        // highlight-next-line\n        "authors":[\n            {"id":1},\n            {"id":2}\n        ]\n    },\n    ...\u7701\u7565\u5176\u4ed6\u5bf9\u8c61...\n]\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u6293\u53d6\u590d\u6742\u7684\u5173\u8054\u5bf9\u8c61",children:"\u6293\u53d6\u590d\u6742\u7684\u5173\u8054\u5bf9\u8c61"}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u6293\u53d6\u5173\u8054\u5c5e\u6027\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u53c2\u6570\u4ee5\u83b7\u53d6\u5177\u5907\u66f4\u591a\u4fe1\u606f\u7684\u5173\u8054\u5bf9\u8c61"}),"\n",(0,i.jsx)(n.h3,{id:"\u591a\u5bf9\u4e00-bookstore-1",children:"\u591a\u5bf9\u4e00: Book.store"}),"\n",(0,i.jsxs)(t.A,{groupId:"language",children:[(0,i.jsx)(a.A,{value:"java",label:"Java",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"BookTable book = Tables.BOOK_TABLE;\nList<Book> list = sqlClient.createQuery(book)\n    .where(book.edition().eq(3))\n    .select(\n        book.fetch(\n            Fetchers.BOOK_FETCHER\n                .allScalarFields()\n                // highlight-next-line\n                .store(\n                    Fetchers.BOOK_STORE_FETCHER\n                        // highlight-next-line\n                        .allScalarFields()\n                )\n        )\n    )\n    .execute();\nSystem.out.println(toJson(list));\n"})})}),(0,i.jsx)(a.A,{value:"kotlin",label:"Kotlin",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"val books = sqlClient\n.createQuery(Book::class) {\n    where(table.edition.eq(3))\n    select(\n        table.fetchBy {\n            allScalarFields()\n            // highlight-next-line\n            store {\n                // highlight-next-line\n                allScalarFields()\n            }\n        }\n    )\n}\n.execute()\n"})})})]}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u91cc\uff0c",(0,i.jsx)(n.code,{children:"store(...)"}),"\u8868\u793a\u5bf9\u591a\u5bf9\u4e00\u5173\u8054\u8fdb\u884c\u6293\u53d6\u3002\u6211\u4eec\u4e3a",(0,i.jsx)(n.code,{children:"store(...)"}),"\u6307\u5b9a\u53c2\u6570\u4ee5\u8868\u793a\u60f3\u8981\u6293\u53d6\u5173\u8054\u5bf9\u8c61\u7684\u9664id\u4ee5\u5916\u7684\u5176\u4ed6\u4fe1\u606f\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u751f\u6210\u5982\u4e0b\u4e24\u6761SQL\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u67e5\u8be2Book\u5bf9\u8c61"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"select\n    tb_1_.ID,\n    tb_1_.NAME,\n    tb_1_.EDITION,\n    tb_1_.PRICE,\n    tb_1_.STORE_ID\nfrom BOOK tb_1_\nwhere tb_1_.EDITION = ?\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u6839\u636e\u5173\u8054",(0,i.jsx)(n.code,{children:"Book.store"}),"\uff0c\u4e3a\u4e0a\u4e00\u6b65\u67e5\u8be2\u7684\u6240\u6709\u6839\u5bf9\u8c61\u67e5\u8be2\u76f8\u5bf9\u5b8c\u6574\u7684",(0,i.jsx)(n.code,{children:"BookStore"}),"\u5173\u8054\u5bf9\u8c61"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"select\n    tb_1_.ID,\n    tb_1_.NAME,\n    tb_1_.WEBSITE\nfrom BOOK_STORE tb_1_\nwhere tb_1_.ID in (?, ?)\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"where tb_1_.ID in (?, ?)"}),"\u662f\u6279\u91cf\u67e5\u8be2\u3002\u7b2c\u4e00\u6761\u67e5\u8be2\u8fd4\u56de\u4e3b\u5bf9\u8c61\u67094\u4e2a\uff0c\u4f46\u662f\u5916\u952e\u5c5e\u6027\u88ab\u53bb\u91cd\u540e\u53ea\u6709\u4e24\u4e2a\u503c\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u8f93\u51fa\u7684\u8fd4\u56de\u503c\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n    {\n        "id": 3,\n        "name": "Learning GraphQL",\n        "edition": 3,\n        "price": 51.00,\n        // highlight-next-line\n        "store": {\n            "id": 1,\n            "name": "O\'REILLY",\n            "website": null\n        }\n    },\n    ...\u7701\u7565\u5176\u4ed6\u5bf9\u8c61...\n]\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u591a\u5bf9\u591a-bookauthors-1",children:"\u591a\u5bf9\u591a: Book.authors"}),"\n",(0,i.jsxs)(t.A,{groupId:"language",children:[(0,i.jsx)(a.A,{value:"java",label:"Java",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"BookTable book = Tables.BOOK_TABLE;\n\nList<Book> books = sqlClient\n    .createQuery(book)\n    .select(\n        book.fetch(\n            Fetchers.BOOK_FETCHER.\n                .allScalarFields()\n                // highlight-next-line\n                .authors(\n                    Fetchers.AUTHOR_FETCHER\n                        // highlight-next-line\n                        .allScalarFields()\n                )\n        )\n    )\n    .execute();\n"})})}),(0,i.jsx)(a.A,{value:"kotlin",label:"Kotlin",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"val books = sqlClient\n    .createQuery(Book::class) {\n        where(table.edition.eq(3))\n        select(\n            table.fetchBy {\n                allScalarFields()\n                // highlight-next-line\n                authors {\n                    // highlight-next-line\n                    allScalarFields()\n                }\n            }\n        )\n    }\n    .execute()\n"})})})]}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u91cc\uff0c",(0,i.jsx)(n.code,{children:"authors(...)"}),"\u8868\u793a\u5bf9\u591a\u5bf9\u591a\u5173\u8054\u8fdb\u884c\u6293\u53d6\u3002\u6211\u4eec\u4e3a",(0,i.jsx)(n.code,{children:"authors(...)"}),"\u6307\u5b9a\u53c2\u6570\u4ee5\u8868\u793a\u60f3\u8981\u6293\u53d6\u5173\u8054\u5bf9\u8c61\u7684\u9664id\u4ee5\u5916\u7684\u5176\u4ed6\u4fe1\u606f\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u751f\u6210\u4e24\u6761SQL:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u67e5\u8be2",(0,i.jsx)(n.code,{children:"Book"}),"\u5bf9\u8c61\u672c\u8eab"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"select \n    tb_1_.ID, \n    tb_1_.NAME, \n    tb_1_.EDITION, \n    tb_1_.PRICE\nfrom BOOK as tb_1_ \nwhere tb_1_.EDITION = ?\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u6839\u636e\u5173\u8054",(0,i.jsx)(n.code,{children:"Book.authors"}),"\uff0c\u4e3a\u4e0a\u4e00\u6b65\u67e5\u8be2\u7684\u6240\u6709\u6839\u5bf9\u8c61\u67e5\u8be2\u76f8\u5bf9\u5b8c\u6574\u7684",(0,i.jsx)(n.code,{children:"Author"}),"\u5173\u8054\u5bf9\u8c61"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"select\n    /* batch-map key */\n    tb_2_.BOOK_ID,\n\n    /* batch-map value */\n    tb_1_.ID,\n    tb_1_.FIRST_NAME,\n    tb_1_.LAST_NAME,\n    tb_1_.GENDER\n\nfrom AUTHOR tb_1_\ninner join BOOK_AUTHOR_MAPPING tb_2_ \n    on tb_1_.ID = tb_2_.AUTHOR_ID\nwhere tb_2_.BOOK_ID in (?, ?, ?, ?)\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u4e2a\u4f8b\u5b50\u8bf4\u660e\u4e86\u4ee5\u4e0b\u95ee\u9898"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u8981\u6c42\u6293\u53d6\u5173\u8054\u5bf9\u8c61\u7684\u9664id\u4ee5\u5916\u7684\u5176\u4ed6\u4fe1\u606f\uff0c\u56e0\u6b64\uff0c\u9664\u4e86\u4e2d\u95f4\u8868",(0,i.jsx)(n.code,{children:"BOOK_AUTHOR_MAPPING"}),"\u5916\uff0c",(0,i.jsx)(n.code,{children:"AUTHOR"}),"\u8868\u4e5f\u4f1a\u88ab\u67e5\u8be2\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"where tb_2_.BOOK_ID in (?, ?, ?, ?)"}),"\u662f\u6279\u91cf\u67e5\u8be2\uff0c\u8fd9\u662f\u56e0\u4e3a\u7b2c\u4e00\u6761\u67e5\u8be2\u8fd4\u56de\u4e3b\u5bf9\u8c61\u67094\u4e2a\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["Jimmer\u4f7f\u7528\u6279\u91cf\u67e5\u8be2\u6765\u89e3\u51b3",(0,i.jsx)(n.code,{children:"N + 1"}),"\u95ee\u9898\uff0c\u8fd9\u70b9\u548cGraphQL\u7684",(0,i.jsx)(n.code,{children:"DataLoader"}),"\u4e00\u6837\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5f53\u4e00\u4e2a\u6279\u6b21\u7684\u5217\u8868\u8fc7\u4e8e\u592a\u957f\u540e\uff0cjimmer-sql\u4f1a\u5bf9\u8fdb\u884c\u5206\u6279\u5207\u5272\uff0c\u8fd9\u4f1a\u5728\u540e\u6587\u7684",(0,i.jsx)(n.a,{href:"#batchsize",children:"BatchSize\u8282"}),"\u4e2d\u8bb2\u89e3\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Jimmer\u901a\u8fc7\u989d\u5916\u7684SQL\u53bb\u67e5\u8be2\u5173\u8054\u5bf9\u8c61\uff0c\u800c\u975e\u5728\u4e3b\u67e5\u8be2\u7684SQL\u4e2d\u4f7f\u7528LEFT JOIN\u6293\u53d6\u5173\u8054\u5bf9\u8c61\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u6837\u8bbe\u8ba1\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u9632\u6b62\u5bf9\u96c6\u5408\u5173\u8054\u8fdb\u884cJOIN\u5bfc\u81f4\u67e5\u8be2\u7ed3\u679c\u91cd\u590d\uff0c\u56e0\u4e3a\u8fd9\u79cd\u6570\u636e\u91cd\u590d\u5bf9\u805a\u5408\u6839\u5206\u9875\u67e5\u8be2\u6709\u6bc1\u706d\u6027\u7684\u7834\u574f\u6548\u679c\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u6253\u5370\u7684\u7ed3\u679c\u5982\u4e0b\uff08\u539f\u8f93\u51fa\u662f\u7d27\u51d1\u7684\uff0c\u4e3a\u4e86\u65b9\u4fbf\u9605\u8bfb\uff0c\u8fd9\u91cc\u8fdb\u884c\u4e86\u683c\u5f0f\u5316\uff09:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n    {\n        "id":3,\n        "name":"Learning GraphQL",\n        "edition":3,\n        "price":51.00,\n        // highlight-next-line\n        "authors":[\n            {\n                "id": 1,\n                "firstName": "Eve",\n                "lastName": "Procello",\n                "gender": "FEMALE"\n            },\n            {\n                "id": 2,\n                "firstName": "Alex",\n                "lastName": "Banks",\n                "gender": "MALE"\n            }\n        ]\n    },\n    ...\u7701\u7565\u5176\u4ed6\u5bf9\u8c61...\n]\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u6293\u53d6\u5355\u8868\u6240\u6709\u5b57\u6bb5",children:"\u6293\u53d6\u5355\u8868\u6240\u6709\u5b57\u6bb5"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u4e00\u4e9b\u573a\u666f\u4e0b\u9700\u8981\u6293\u53d6\u6570\u636e\u770b\u8868\u6240\u5b9a\u4e49\u4e2d\u7684\u6240\u6709\u5b57\u6bb5\uff0c\u6b64\u65f6\u4f7f\u7528",(0,i.jsx)(n.code,{children:"allTableFields"}),"\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allTableFields"}),"\u6293\u53d6\u8868\u5b9a\u4e49\u4e2d\u7684\u6240\u6709\u5c5e\u6027\uff0c\u5305\u542b\u6240\u6709\u6807\u91cf\u5c5e\u6027\uff08\u8fd9\u70b9\u540c",(0,i.jsx)(n.code,{children:"allScalarFields"}),"\uff09\u3001\u57fa\u4e8e\u5916\u952e\u7684\u4e00\u5bf9\u4e00/\u591a\u5bf9\u4e00\u5c5e\u6027\uff1b\u4f46\u4e0d\u5305\u542b\u4e00\u5bf9\u591a\u3001\u591a\u5bf9\u591a\u3001\u57fa\u4e8e\u4e2d\u95f4\u8868\u7684\u4e00\u5bf9\u4e00/\u591a\u5bf9\u4e00\u5173\u8054\u5c5e\u6027\u3001\u8ba1\u7b97\u5c5e\u6027\u548c\u89c6\u56fe\u5c5e\u6027\u3002"]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allTableFields"}),"\u5728",(0,i.jsx)(n.code,{children:"allScalarFields"}),"\u7684\u57fa\u7840\u4e0a\uff0c\u52a0\u4e0a\u4e86\u6240\u6709\u5916\u952e\u7684\u4e00\u5bf9\u4e00/\u591a\u5bf9\u4e00\u5c5e\u6027\uff0c\u4f46\u662f\u67e5\u8be2\u51fa\u7684\u5173\u8054\u5bf9\u8c61\u53ea\u6709id\u5c5e\u6027\u3002"]})}),"\n",(0,i.jsxs)(t.A,{groupId:"language",children:[(0,i.jsx)(a.A,{value:"java",label:"Java",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"BookTable book = Tables.BOOK_TABLE;\nList<Book> list = sqlClient.createQuery(book)\n    .where(book.edition().eq(3))\n    .select(\n        book.fetch(\n            Fetchers.BOOK_FETCHER\n                // highlight-next-line\n                .allTableFields()\n        )\n    )\n    .execute();\nSystem.out.println(toJson(list));\n"})})}),(0,i.jsx)(a.A,{value:"kotlin",label:"Kotlin",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"val bookAllTableFields = sqlClient\n    .createQuery(Book::class) {\n        where(table.edition.eq(3))\n        select(\n            table.fetchBy {\n                // highlight-next-line\n                allTableFields()\n            }\n        )\n    }\n    .execute()\n"})})})]}),"\n",(0,i.jsx)(n.p,{children:"\u8f93\u51fa\u7684\u7ed3\u679c\u4e3a\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n    {\n        "id": 3,\n        "name": "Learning GraphQL",\n        "edition": 3,\n        "price": 51.00,\n        // highlight-next-line\n        "store": {\n            "id": 1\n        }\n    }\n    ...\u7701\u7565\u5176\u4ed6\u5bf9\u8c61\n]\n'})}),"\n",(0,i.jsxs)(n.admonition,{type:"info",children:[(0,i.jsxs)(n.p,{children:["\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c",(0,i.jsx)(n.code,{children:"select(table.fetch(Fetchers.XXX_FETCHER.allTableFields()))"}),"\u548c",(0,i.jsx)(n.code,{children:"select(table)"}),"\u7b49\u4ef7\u3002\u6b64\u65f6\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u540e\u8005\u662f\u524d\u8005\u7684\u7b80\u5199\u65b9\u5f0f\u3002"]}),(0,i.jsxs)(n.p,{children:["\u4e8c\u8005\u7b49\u4ef7\u7684\u524d\u63d0\uff1a\u5173\u8054\u5bf9\u8c61\u4e0d\u53d7",(0,i.jsx)(c.l,{buttonText:"\u8fc7\u6ee4\u5668",children:(0,i.jsx)(d,{})}),"\u5f71\u54cd"]})]}),"\n",(0,i.jsx)(n.p,{children:"\u7b49\u4ef7\u7684\u7b80\u5355\u5199\u6cd5\u5982\u4e0b"}),"\n",(0,i.jsxs)(t.A,{groupId:"language",children:[(0,i.jsx)(a.A,{value:"java",label:"Java",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"BookTable book = Tables.BOOK_TABLE;\nList<Book> list = sqlClient.createQuery(book)\n    .where(book.edition().eq(3))\n    // highlight-next-line\n    .select(book)\n    .execute();\nSystem.out.println(toJson(list));\n"})})}),(0,i.jsx)(a.A,{value:"kotlin",label:"Kotlin",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"val bookAllScalarFields = sqlClient\n    .createQuery(Book::class) {\n        where(table.edition.eq(3))\n        // highlight-next-line\n        select(table)\n    }\n    .execute()\n\n"})})})]}),"\n",(0,i.jsx)(n.h2,{id:"\u5173\u8054\u5bf9\u8c61\u7684\u7279\u6b8a\u914d\u7f6e",children:"\u5173\u8054\u5bf9\u8c61\u7684\u7279\u6b8a\u914d\u7f6e"}),"\n",(0,i.jsx)(n.h3,{id:"batchsize",children:"BatchSize"}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u4e00\u5bf9\u591a/\u591a\u5bf9\u591a\u7684\u5173\u8054\u4e2d\uff0c\u5982\u679c\u5173\u8054\u5bf9\u8c61\u7684\u6570\u91cf\u5f88\u591a\uff0c\u5c06\u53ef\u80fd\u5bf9\u5e94\u7528\u7a0b\u5e8f\u7684\u6027\u80fd\u9020\u6210\u5f71\u54cd\uff0c\u56e0\u6b64\u63d0\u4f9b\u4e86\u4e00\u4e2aBatchSize\u7684\u914d\u7f6e\u9879\u8fdb\u884c\u7ba1\u7406\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u4ee5\u4e0b\u793a\u4f8b\u6ca1\u6709\u914d\u7f6eBatchSize\uff1a"}),"\n",(0,i.jsxs)(t.A,{groupId:"language",children:[(0,i.jsx)(a.A,{value:"java",label:"Java",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"BookTable book = Tables.BOOK_TABLE;\nList<Book> list = sqlClient.createQuery(book)\n    .where(book.edition().eq(3))\n    .select(\n        book.fetch(\n            Fetchers.BOOK_FETCHER.allScalarFields()\n                // highlight-next-line\n                .authors(Fetchers.AUTHOR_FETCHER.allScalarFields())\n        )\n    )\n    .execute();\nSystem.out.println(toJson(list));\n"})})}),(0,i.jsx)(a.A,{value:"kotlin",label:"Kotlin",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"val books = sqlClient\n    .createQuery(Book::class) {\n        where(table.edition.eq(3))\n        select(\n            table.fetchBy {\n                allTableFields()\n                authors {\n                    // highlight-next-line\n                    allScalarFields()\n                }\n            }\n        )\n    }\n.execute()\n"})})})]}),"\n",(0,i.jsx)(n.p,{children:"\u751f\u6210SQL\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"# 1.\u9996\u5148\u67e5\u8be2book\u8868\u5f97\u5230\u6240\u6709BOOK_ID\nselect\n    tb_1_.ID,\n    tb_1_.NAME,\n    tb_1_.EDITION,\n    tb_1_.PRICE\nfrom BOOK tb_1_\nwhere tb_1_.EDITION = ?\n\n# 2.\u7528\u4e0a\u4e00\u6b65\u5f97\u5230\u7684\u6240\u6709BOOK_ID\u5173\u8054\u67e5\u8be2author\u8868\u548c\u4e2d\u95f4\u8868\nselect\n    tb_2_.BOOK_ID,\n    tb_1_.ID,\n    tb_1_.FIRST_NAME,\n    tb_1_.LAST_NAME,\n    tb_1_.GENDER\nfrom AUTHOR tb_1_\ninner join BOOK_AUTHOR_MAPPING tb_2_ on tb_1_.ID = tb_2_.AUTHOR_ID\nwhere tb_2_.BOOK_ID in (?, ?, ?, ?)\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u8be5sql\u4e2d\uff0c\u56e0\u4e3a\u6ca1\u6709\u914d\u7f6eBatchSize\u6240\u4ee5\u4f1a\u4f7f\u7528\u9ed8\u8ba4\u503c\uff0c\u6709\u591a\u5c11\u4e2aBOOK_ID\u90fd\u4f1a\u76f4\u63a5\u4f7f\u7528\u5728\u7b2c\u4e8c\u4e2aSQL\u67e5\u8be2\u7684",(0,i.jsx)(n.code,{children:"in(...)"}),"\u5217\u8868\u91cc\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n    {\n        "id": 3,\n        "name": "Learning GraphQL",\n        "edition": 3,\n        "price": 51.00,\n        "authors": [\n            {\n                "id": 1,\n                "firstName": "Eve",\n                "lastName": "Procello",\n                "gender": "FEMALE"\n            },\n            {\n                "id": 2,\n                "firstName": "Alex",\n                "lastName": "Banks",\n                "gender": "MALE"\n            }\n        ]\n    },\n    ...\u7701\u7565\u5176\u4ed6\u5bf9\u8c61\n]\n\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u8fd9\u6837\u7684\u67e5\u8be2"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"select\n    tb_2_.BOOK_ID,\n    tb_1_.ID,\n    tb_1_.FIRST_NAME,\n    tb_1_.LAST_NAME,\n    tb_1_.GENDER\nfrom AUTHOR tb_1_\ninner join BOOK_AUTHOR_MAPPING tb_2_ on tb_1_.ID = tb_2_.AUTHOR_ID\nwhere tb_2_.BOOK_ID in (?, ?, ?, ?)\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u91cc\uff0c",(0,i.jsx)(n.code,{children:"in"}),"\u8868\u8fbe\u5f0f\u5b9e\u73b0\u4e86\u6279\u91cf\u67e5\u8be2\uff0c\u89e3\u51b3\u4e86",(0,i.jsx)(n.code,{children:"N + 1"}),"\u95ee\u9898\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c\u4e00\u4e2a\u6279\u91cf\u592a\u5927\uff0c\u5c31\u4f1a\u6839\u636e\u4e00\u4e2a\u53eb",(0,i.jsx)(n.code,{children:"batchSize"}),"\u7684\u8bbe\u7f6e\u8fdb\u884c\u5206\u6279\u5207\u5272\uff0c\u5982"]}),"\n",(0,i.jsxs)(t.A,{groupId:"language",children:[(0,i.jsx)(a.A,{value:"java",label:"Java",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"BookTable book = Tables.BOOK_TABLE;\nList<Book> list = sqlClient.createQuery(book)\n    .where(book.edition().eq(3))\n    .select(\n        book.fetch(\n                Fetchers.BOOK_FETCHER.allScalarFields()\n                // highlight-next-line\n                .authors(Fetchers.AUTHOR_FETCHER.allScalarFields(), it -> it.batch(2))\n        )\n    )\n    .execute();\n"})})}),(0,i.jsx)(a.A,{value:"kotlin",label:"Kotlin",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"val books = sqlClient\n    .createQuery(Book::class) {\n        where(table.edition.eq(3))\n        select(\n            table.fetchBy {\n                allScalarFields()\n                authors({\n                    // highlight-next-line\n                    batch(2)\n                }) {}\n            }\n        )\n    }\n    .execute()\n"})})})]}),"\n",(0,i.jsx)(n.admonition,{type:"danger",children:(0,i.jsxs)(n.p,{children:["\u8fd9\u91cc\uff0c",(0,i.jsx)(n.code,{children:"authors"}),"\u5173\u8054\u7684batchSize\u88ab\u8bbe\u7f6e\u4e3a2\u3002\u6b64\u914d\u7f6e\u8bbe\u7f6e\u7684\u503c\u592a\u5c0f\u4f1a\u5bfc\u81f4\u6027\u80fd\u4f4e\u4e0b\uff0c\u8fd9\u91cc\u4ec5\u4ec5\u4e3a\u4e86\u6f14\u793a\uff0c\u5b9e\u9645\u9879\u76ee\u4e2d\u8bf7\u4e0d\u8981\u8bbe\u7f6e\u5982\u6b64\u5c0f\u7684\u503c\u3002"]})}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u6837\u4f1a\u5bfc\u81f4",(0,i.jsx)(n.code,{children:"in(?, ?, ?, ?)"}),"\u88ab\u5207\u5272\u4e3a\u4e24\u4e2a",(0,i.jsx)(n.code,{children:"in(?, ?)"}),"\uff0c\u6293\u53d6\u5173\u8054\u5bf9\u8c61\u7684Sql\u4f1a\u6bd4\u5206\u88c2\u6210\u4e24\u6761\u3002"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"select\n    tb_2_.BOOK_ID,\n    tb_1_.ID,\n    tb_1_.FIRST_NAME,\n    tb_1_.LAST_NAME,\n    tb_1_.GENDER\nfrom AUTHOR tb_1_\ninner join BOOK_AUTHOR_MAPPING tb_2_ on tb_1_.ID = tb_2_.AUTHOR_ID\nwhere tb_2_.BOOK_ID in (?, ?)\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"select\n    tb_2_.BOOK_ID,\n    tb_1_.ID,\n    tb_1_.FIRST_NAME,\n    tb_1_.LAST_NAME,\n    tb_1_.GENDER\nfrom AUTHOR tb_1_\ninner join BOOK_AUTHOR_MAPPING tb_2_ on tb_1_.ID = tb_2_.AUTHOR_ID\nwhere tb_2_.BOOK_ID in (?, ?)\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u7edd\u5927\u90e8\u5206\u60c5\u51b5\u90fd\u4e0d\u4f1a\u8fd9\u6837\u8bbe\u7f6ebatchSize\uff0c\u800c\u662f\u91c7\u7528SqlClient\u4e2d\u7684\u5168\u5c40\u914d\u7f6e\u3002"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"JSqlClient.getDefaultBatchSize()"}),": \u4e00\u5bf9\u4e00\u548c\u591a\u5bf9\u4e00\u5173\u8054\u5c5e\u6027\u7684\u9ed8\u8ba4batchSize\uff0c\u9ed8\u8ba4128"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"JSqlClient.getDefaultListBatchSize()"}),": \u4e00\u5bf9\u591a\u548c\u591a\u5bf9\u591a\u5173\u8054\u5c5e\u6027\u7684\u9ed8\u8ba4batchSize\uff0c\u9ed8\u8ba416"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u521b\u5efaSqlClient\u65f6\uff0c\u53ef\u4ee5\u66f4\u6539\u5168\u5c40\u914d\u7f6e:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u4f7f\u7528Spring Boot"}),"\n",(0,i.jsxs)(n.p,{children:["\u4e3a",(0,i.jsx)(n.code,{children:"application.yml"})," or ",(0,i.jsx)(n.code,{children:"application.properties"}),"\u5047\u5982\u5982\u4e0b\u914d\u7f6e"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:'language-title="application.yml"',children:"jimmer:\n    default-batch-size: 256\n    default-list-batch-size: 32\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u4f7f\u7528\u5e95\u5c42API"}),"\n",(0,i.jsxs)(t.A,{groupId:"language",children:[(0,i.jsx)(a.A,{value:"java",label:"Java",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"JSqlClient sqlClient = JSqlClient\n    .newBuilder()\n    .setDefaultBatchSize(256)\n    .setDefaultListBatchSize(32)\n    ....\n    build();\n"})})}),(0,i.jsx)(a.A,{value:"kotlin",label:"Kotlin",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"val sqlClient = newKSqlClient {\n    setDefaultBatchSize(256)\n    setDefaultListBatchSize(32)\n    ....\n    }\n"})})})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.p,{children:["\u65e0\u8bba\u662f\u5bf9\u8c61\u6293\u53d6\u5668\u7ea7\u7684batchSize\uff0c\u8fd8\u662f\u5168\u5c40\u7ea7\u7684batchSize\uff0c\u90fd\u4e0d\u8981\u8d85\u8fc71000\uff0c\u56e0\u4e3aOracle\u6570\u636e\u5e93\u4e2d",(0,i.jsx)(n.code,{children:"in(...)"}),"\u6700\u591a\u5141\u8bb81000\u4e2a\u503c\u3002"]})}),"\n",(0,i.jsx)(n.h3,{id:"\u5173\u8054\u7ea7\u5206\u9875",children:"\u5173\u8054\u7ea7\u5206\u9875"}),"\n",(0,i.jsxs)(n.p,{children:["\u5bf9\u4e8e\u96c6\u5408\u5173\u8054\uff0c\u53ef\u4ee5\u5728\u6293\u53d6\u5c5e\u6027\u65f6\u6307\u5b9a",(0,i.jsx)(n.code,{children:"limit(limit, offset)"}),"\uff0c\u5373\u5173\u8054\u7ea7\u522b\u7684\u5206\u9875\u3002"]}),"\n",(0,i.jsxs)(n.admonition,{type:"caution",children:[(0,i.jsxs)(n.p,{children:["\u5173\u8054\u7ea7\u5206\u9875\u548c\u6279\u91cf\u52a0\u8f7d\u65e0\u6cd5\u5171\u5b58\uff0c\u56e0\u6b64\uff0c\u5173\u8054\u7ea7\u5206\u9875\u5fc5\u7136\u5bfc\u81f4",(0,i.jsx)(n.code,{children:"N + 1"}),"\u95ee\u9898\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\u6b64\u529f\u80fd\uff01"]}),(0,i.jsxs)(n.p,{children:["\u5982\u679c\u4f7f\u7528\u4e86\u5173\u8054\u7ea7\u5206\u9875\uff0c\u5fc5\u987b\u628abatchSize\u6307\u5b9a\u4e3a1\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u5f02\u5e38\u3002\u6b64\u8bbe\u8ba1\u7684\u76ee\u7684\u5728\u4e8e\u8ba9\u5f00\u53d1\u4eba\u5458\u548c\u9605\u8bfb\u4ee3\u7801\u7684\u4eba\u5f88\u6e05\u695a\u5f53\u524d\u4ee3\u7801\u5b58\u5728",(0,i.jsx)(n.code,{children:"N + 1"}),"\u6027\u80fd\u98ce\u9669\u3002"]})]}),"\n",(0,i.jsxs)(t.A,{groupId:"language",children:[(0,i.jsx)(a.A,{value:"java",label:"Java",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"BookTable book = Tables.BOOK_TABLE;\n\nList<Book> books = sqlClient\n    .createQuery(book)\n    .select(\n        book.fetch(\n            Fetchers.BOOK_FETCHER\n            .allScalarFields()\n            .authors(\n                Fetchers.AUTHOR_FETCHER.allScalarFields(),\n                // highlight-next-line\n                it -> it.batch(1).limit(/*limit*/ 10, /*offset*/ 90)\n            )\n        )\n    )\n    .execute();\n"})})}),(0,i.jsx)(a.A,{value:"kotlin",label:"Kotlin",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"val books = sqlClient\n    .createQuery(Book::class) {\n        where(table.edition.eq(3))\n        select(\n            // highlight-next-line\n            table.fetchBy {\n                allScalarFields()\n                authors({\n                    batch(1)\n                    // highlight-next-line\n                    limit(limit = 90, offset = 10)\n                    }) {\n                    allScalarFields()\n                }\n            }\n        )\n    }\n    .execute()\n"})})})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u56e0\u5173\u8054\u5206\u9875\u65e0\u6cd5\u89e3\u51b3",(0,i.jsx)(n.code,{children:"N + 1"}),"\u95ee\u9898\uff0c\u751f\u6210\u7684SQL\u6bd4\u8f83\u591a"]}),"\n",(0,i.jsxs)(n.li,{children:["\u56e0\u4e0d\u540c\u6570\u636e\u5e93\u5206\u9875\u67e5\u8be2\u65b9\u6cd5\u4e0d\u540c\uff0c\u4e3a\u4e86\u7b80\u5316\u8ba8\u8bba\uff0c\u8fd9\u91cc\u5047\u8bbe\u65b9\u8a00\u4f7f\u7528\u4e86",(0,i.jsx)(n.code,{children:"H2Dialect"})]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u67e5\u8be2\u5f53\u524d",(0,i.jsx)(n.code,{children:"Book"}),"\u5bf9\u8c61"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"select\n    tb_1_.ID,\n    tb_1_.NAME,\n    tb_1_.EDITION,\n    tb_1_.PRICE\nfrom BOOK as tb_1_\nwhere tb_1_.EDITION = ?\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u5bf9\u7b2c1\u4e2a",(0,i.jsx)(n.code,{children:"Book"}),"\u5bf9\u8c61\u7684",(0,i.jsx)(n.code,{children:"authors"}),"\u96c6\u5408\u8fdb\u884c\u5206\u9875\u67e5\u8be2"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"select\n    tb_1_.AUTHOR_ID,\n    tb_3_.FIRST_NAME,\n    tb_3_.LAST_NAME,\n    tb_3_.GENDER\nfrom BOOK_AUTHOR_MAPPING as tb_1_\ninner join AUTHOR as tb_3_ on tb_1_.AUTHOR_ID = tb_3_.ID\nwhere tb_1_.BOOK_ID = ?\n/* highlight-next-line */\nlimit ? offset ?\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u5bf9\u7b2c2\u4e2a",(0,i.jsx)(n.code,{children:"Book"}),"\u5bf9\u8c61\u7684",(0,i.jsx)(n.code,{children:"authors"}),"\u96c6\u5408\u8fdb\u884c\u5206\u9875\u67e5\u8be2"]}),"\n",(0,i.jsx)(n.p,{children:"\u540c\u4e0a\uff0c\u7565"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u5bf9\u7b2c3\u4e2a",(0,i.jsx)(n.code,{children:"Book"}),"\u5bf9\u8c61\u7684",(0,i.jsx)(n.code,{children:"authors"}),"\u96c6\u5408\u8fdb\u884c\u5206\u9875\u67e5\u8be2"]}),"\n",(0,i.jsx)(n.p,{children:"\u540c\u4e0a\uff0c\u7565"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u5bf9\u7b2c4\u4e2a",(0,i.jsx)(n.code,{children:"Book"}),"\u5bf9\u8c61\u7684",(0,i.jsx)(n.code,{children:"authors"}),"\u96c6\u5408\u8fdb\u884c\u5206\u9875\u67e5\u8be2"]}),"\n",(0,i.jsx)(n.p,{children:"\u540c\u4e0a\uff0c\u7565"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u5c5e\u6027\u8fc7\u6ee4\u5668",children:"\u5c5e\u6027\u8fc7\u6ee4\u5668"}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u6293\u53d6\u5173\u8054\u5c5e\u6027\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u8fc7\u6ee4\u5668\uff0c\u4e3a\u5173\u8054\u5bf9\u8c61\u6307\u5b9a\u8fc7\u6ee4\u6761\u4ef6\u3002"}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u91cc\uff0c\u4e3a\u4e86\u5bf9\u6bd4\uff0c\u6211\u4eec\u8ba9\u67e5\u8be2\u9009\u53d6\u4e24\u5217\uff0c\u4e24\u5217\u90fd\u662f",(0,i.jsx)(n.code,{children:"Book"}),"\u7c7b\u578b\u3002"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u7b2c\u4e00\u5217\u5bf9\u8c61\u7684",(0,i.jsx)(n.code,{children:"Book.authors"}),"\u4f7f\u7528\u8fc7\u6ee4\u5668"]}),"\n",(0,i.jsxs)(n.li,{children:["\u7b2c\u4e8c\u5217\u5bf9\u8c61\u7684",(0,i.jsx)(n.code,{children:"Book.authors"}),"\u4e0d\u4f7f\u7528\u8fc7\u6ee4\u5668"]}),"\n"]}),"\n",(0,i.jsxs)(t.A,{groupId:"language",children:[(0,i.jsx)(a.A,{value:"java",label:"Java",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'BookTable book = Tables.BOOK_TABLE;\n\nList<Tuple2<Book, Book>> books = sqlClient\n    .createQuery(book)\n    .select(\n        // \u7b2c\u4e00\u5217\n        book.fetch(\n            Fetchers.BOOK_FETCHER\n            .allScalarFields()\n            .authors(\n                Fetchers.AUTHOR_FETCHER.allScalarFields(),\n\n                // \u4f7f\u7528\u8fc7\u6ee4\u5668\n                // highlight-next-line\n                it -> it.filter(args -> {\n                    args.where(args.getTable().firstName().ilike("a"));\n                })\n            )\n        ),\n\n        // \u7b2c\u4e8c\u5217\n        book.fetch(\n            Fetchers.BOOK_FETCHER\n                .allScalarFields()\n                .authors(\n                    Fetchers.AUTHOR_FETCHER.allScalarFields()\n                // \u4e0d\u4f7f\u7528\u8fc7\u6ee4\u5668\n                )\n        )\n    )\n    .execute();\n'})})}),(0,i.jsx)(a.A,{value:"kotlin",label:"Kotlin",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:'val tuples: List<Tuple2<Book, Book>> = sqlClient\n    .createQuery(Book::class) {\n        where(table.edition.eq(3))\n        select(\n\n            // \u7b2c\u4e00\u5217\n            table.fetchBy {\n                allScalarFields()\n                authors({\n                    // \u4f7f\u7528\u8fc7\u6ee4\u5668\n                    // highlight-next-line\n                    filter {\n                    where(table.firstName ilike "a")\n                    }\n                }) {\n                    allScalarFields()\n                }\n            },\n\n            // \u7b2c\u4e8c\u5217\n            table.fetchBy {\n                allScalarFields()\n                authors { // \u4e0d\u4f7f\u7528\u8fc7\u6ee4\u5668\n                    allScalarFields()\n                }\n            }\n        )\n    }\n.execute()\n'})})})]}),"\n",(0,i.jsx)(n.p,{children:"\u751f\u6210\u4e09\u6761SQL"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u67e5\u8be2\u5143\u7ec4\u9700\u8981\u7684\u4e24\u4e2a",(0,i.jsx)(n.code,{children:"Book"}),"\u5bf9\u8c61"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"select\n\n/* For tuple._1 */\n    tb_1_.ID,\n    tb_1_.NAME,\n    tb_1_.EDITION,\n    tb_1_.PRICE,\n\n/* For tuple._2 */\n    tb_1_.ID,\n    tb_1_.NAME,\n    tb_1_.EDITION,\n    tb_1_.PRICE\n\nfrom BOOK as tb_1_\nwhere tb_1_.EDITION = ?\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u4e3a\u7b2c1\u5217\u76844\u4e2a",(0,i.jsx)(n.code,{children:"Book"}),"\u5bf9\u8c61\u67e5\u8be2",(0,i.jsx)(n.code,{children:"authors"}),"\u5173\u8054\u5c5e\u6027\uff0c\u4f7f\u7528\u8fc7\u6ee4\u5668"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"select\n\n    tb_1_.BOOK_ID,\n    tb_1_.AUTHOR_ID,\n    tb_3_.FIRST_NAME,\n    tb_3_.LAST_NAME,\n    tb_3_.GENDER\nfrom BOOK_AUTHOR_MAPPING as tb_1_\ninner join AUTHOR as tb_3_ on tb_1_.AUTHOR_ID = tb_3_.ID\nwhere\n    tb_1_.BOOK_ID in (?, ?, ?, ?)\nand\n    /* Use filter here */\n    /* highlight-next-line */\n    lower(tb_3_.FIRST_NAME) like ?\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u4e3a\u7b2c2\u5217\u76844\u4e2a",(0,i.jsx)(n.code,{children:"Book"}),"\u5bf9\u8c61\u67e5\u8be2",(0,i.jsx)(n.code,{children:"authors"}),"\u5173\u8054\u5c5e\u6027\uff0c\u4e0d\u4f7f\u7528\u8fc7\u6ee4\u5668"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"select\n\n    tb_1_.BOOK_ID,\n    tb_1_.AUTHOR_ID,\n    tb_3_.FIRST_NAME,\n    tb_3_.LAST_NAME,\n    tb_3_.GENDER\nfrom BOOK_AUTHOR_MAPPING as tb_1_\ninner join AUTHOR as tb_3_ on tb_1_.AUTHOR_ID = tb_3_.ID\nwhere\n    tb_1_.BOOK_ID in (?, ?, ?, ?)\n/* No filter here */\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u6253\u5370\u7684\u7ed3\u679c\u5982\u4e0b\uff08\u539f\u8f93\u51fa\u662f\u7d27\u51d1\u7684\uff0c\u4e3a\u4e86\u65b9\u4fbf\u9605\u8bfb\uff0c\u8fd9\u91cc\u8fdb\u884c\u4e86\u683c\u5f0f\u5316\uff09:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'Tuple2{\n    _1={\n        "id":3,\n        "name":"Learning GraphQL",\n        "edition":3,\n        "price":51.00,\n\n        // \u4f7f\u7528\u4e86\u5c5e\u6027\u7ea7\u8fc7\u6ee4\u5668\uff0c\u5f97\u5230\u7684\u96c6\u5408\u4e0d\u5b8c\u6574\n        // highlight-next-line\n        "authors":[\n            {\n                "id":2,\n                "firstName":"Alex",\n                "lastName":"Banks",\n                "gender":"MALE"\n            }\n        ]\n    },\n    _2={\n        "id":3,\n        "name":"Learning GraphQL",\n        "edition":3,\n        "price":51.00,\n\n        // \u672a\u4f7f\u7528\u5c5e\u6027\u7ea7\u8fc7\u6ee4\u5668\uff0c\u5f97\u5230\u7684\u96c6\u5408\u662f\u5b8c\u6574\u7684\n        // highlight-next-line\n        "authors":[\n            {\n                "id":2,\n                "firstName":"Alex",\n                "lastName":"Banks",\n                "gender":"MALE"\n            },{\n                "id":"fd6bb6cf-336d-416c-8005-1ae11a6694b5",\n                "firstName":"Eve",\n                "lastName":"Procello",\n                "gender":"MALE"\n            }\n        ]\n    }\n}\n'})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"\u8fc7\u6ee4\u5668\u4e0d\u4ec5\u53ef\u4ee5\u7b5b\u9009\u5173\u8054\u5bf9\u8c61\uff0c\u8fd8\u53ef\u4ee5\u6392\u5e8f\u5173\u8054\u5bf9\u8c61\uff0c\u539f\u7406\u7c7b\u4f3c\uff0c\u672c\u6587\u4e0d\u505a\u793a\u8303"})}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5bf9\u4e8e\u540c\u65f6\u6ee1\u8db3\u4ee5\u4e0b\u4e24\u4e2a\u6761\u4ef6\u7684\u5173\u8054\u5c5e\u6027"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u591a\u5bf9\u4e00"}),"\n",(0,i.jsx)(n.li,{children:"\u4e0d\u4e3anull"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u65bd\u52a0\u8fc7\u6ee4\u5668\u4f1a\u5bfc\u81f4\u5f02\u5e38\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u4f7f\u7528\u4e86\u5b57\u6bb5\u7ea7\u8fc7\u6ee4\u5668\u540e\uff0c\u8be5\u5b57\u6bb5\u7684",(0,i.jsx)(n.a,{href:"../../cache/cache-type/association",children:"\u5173\u8054\u7f13\u5b58"}),"\u4f1a\u5931\u6548\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c\u4e0d\u60f3\u8ba9\u5173\u8054\u7f13\u5b58\u5931\u6548\uff0c\u53ef\u4ee5\u4f7f\u7528\u652f\u6301",(0,i.jsx)(n.a,{href:"../../cache/multiview-cache",children:"\u591a\u89c6\u89d2\u7f13\u5b58"}),"\u7684\u5168\u5c40\u8fc7\u6ee4\u5668\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u6709\u4e00\u79cd\u5b9e\u9645\u5f00\u53d1\u4e2d\u5e38\u89c1\u7684\u9519\u8bef\uff08\u4ee5Java\u4e3a\u4f8b\uff09"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:'filter(it -> args.getTable().firstName().ilike "a")'}),"\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u6bb5\u4ee3\u7801\u521b\u5efa\u4e86\u6761\u4ef6\u8868\u8fbe\u5f0f\uff0c\u4f46\u662f\u5e76\u6ca1\u6709\u8c03\u7528",(0,i.jsx)(n.code,{children:"args.where"}),"\u3002\u65e2\u4e0d\u8c03\u7528",(0,i.jsx)(n.code,{children:"args.where"}),"\u4e5f\u4e0d\u8c03\u7528",(0,i.jsx)(n.code,{children:"args.orderBy"}),"\u7684\u8fc7\u6ee4\u5668\u4ee3\u7801\u662f\u6ca1\u6709\u610f\u4e49\u7684\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u6b63\u786e\u7684\u4ee3\u7801\u662f"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:'filter(it -> args.where(args.getTable().firstName().ilike "a"))'}),"\u3002"]}),"\n"]}),"\n"]})})]})}function b(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(_,{...e})}):_(e)}},28453:(e,n,l)=>{l.d(n,{R:()=>t,x:()=>a});var s=l(96540);const i={},r=s.createContext(i);function t(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);