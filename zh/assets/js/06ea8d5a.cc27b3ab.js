"use strict";(self.webpackChunkdocusaurus_code=self.webpackChunkdocusaurus_code||[]).push([[8217],{3905:(e,n,a)=>{a.d(n,{Zo:()=>s,kt:()=>k});var t=a(67294);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function l(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function i(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},o=Object.keys(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=t.createContext({}),u=function(e){var n=t.useContext(p),a=n;return e&&(a="function"==typeof e?e(n):l(l({},n),e)),a},s=function(e){var n=u(e.components);return t.createElement(p.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},c=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),c=u(a),k=r,d=c["".concat(p,".").concat(k)]||c[k]||m[k]||o;return a?t.createElement(d,l(l({ref:n},s),{},{components:a})):t.createElement(d,l({ref:n},s))}));function k(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=c;var i={};for(var p in n)hasOwnProperty.call(n,p)&&(i[p]=n[p]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var u=2;u<o;u++)l[u]=a[u];return t.createElement.apply(null,l)}return t.createElement.apply(null,a)}c.displayName="MDXCreateElement"},85162:(e,n,a)=>{a.d(n,{Z:()=>l});var t=a(67294),r=a(34334);const o="tabItem_Ymn6";function l(e){let{children:n,hidden:a,className:l}=e;return t.createElement("div",{role:"tabpanel",className:(0,r.Z)(o,l),hidden:a},n)}},65488:(e,n,a)=>{a.d(n,{Z:()=>k});var t=a(83117),r=a(67294),o=a(34334),l=a(72389),i=a(67392),p=a(7094),u=a(12466);const s="tabList__CuJ",m="tabItem_LNqP";function c(e){var n;const{lazy:a,block:l,defaultValue:c,values:k,groupId:d,className:b}=e,N=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),v=k??N.map((e=>{let{props:{value:n,label:a,attributes:t}}=e;return{value:n,label:a,attributes:t}})),y=(0,i.l)(v,((e,n)=>e.value===n.value));if(y.length>0)throw new Error(`Docusaurus error: Duplicate values "${y.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const f=null===c?c:c??(null==(n=N.find((e=>e.props.default)))?void 0:n.props.value)??N[0].props.value;if(null!==f&&!v.some((e=>e.value===f)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${f}" but none of its children has the corresponding value. Available values are: ${v.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:g,setTabGroupChoices:h}=(0,p.U)(),[T,j]=(0,r.useState)(f),J=[],{blockElementScrollPositionUntilNextRender:x}=(0,u.o5)();if(null!=d){const e=g[d];null!=e&&e!==T&&v.some((n=>n.value===e))&&j(e)}const w=e=>{const n=e.currentTarget,a=J.indexOf(n),t=v[a].value;t!==T&&(x(n),j(t),null!=d&&h(d,String(t)))},C=e=>{var n;let a=null;switch(e.key){case"ArrowRight":{const n=J.indexOf(e.currentTarget)+1;a=J[n]??J[0];break}case"ArrowLeft":{const n=J.indexOf(e.currentTarget)-1;a=J[n]??J[J.length-1];break}}null==(n=a)||n.focus()};return r.createElement("div",{className:(0,o.Z)("tabs-container",s)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":l},b)},v.map((e=>{let{value:n,label:a,attributes:l}=e;return r.createElement("li",(0,t.Z)({role:"tab",tabIndex:T===n?0:-1,"aria-selected":T===n,key:n,ref:e=>J.push(e),onKeyDown:C,onFocus:w,onClick:w},l,{className:(0,o.Z)("tabs__item",m,null==l?void 0:l.className,{"tabs__item--active":T===n})}),a??n)}))),a?(0,r.cloneElement)(N.filter((e=>e.props.value===T))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},N.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==T})))))}function k(e){const n=(0,l.Z)();return r.createElement(c,(0,t.Z)({key:String(n)},e))}},95771:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>s,contentTitle:()=>p,default:()=>k,frontMatter:()=>i,metadata:()=>u,toc:()=>m});var t=a(83117),r=(a(67294),a(3905)),o=a(65488),l=a(85162);const i={sidebar_position:6,title:"\u5f31\u8fde\u63a5"},p=void 0,u={unversionedId:"query/dynamic-join/weak-join",id:"query/dynamic-join/weak-join",title:"\u5f31\u8fde\u63a5",description:"\u8981\u89e3\u51b3\u7684\u95ee\u9898",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/query/dynamic-join/weak-join.mdx",sourceDirName:"query/dynamic-join",slug:"/query/dynamic-join/weak-join",permalink:"/jimmer-doc/zh/docs/query/dynamic-join/weak-join",draft:!1,editUrl:"https://github.com/babyfish-ct/jimmer-doc/edit/main/i18n/zh/docusaurus-plugin-content-docs/current/query/dynamic-join/weak-join.mdx",tags:[],version:"current",lastUpdatedAt:1731341376,formattedLastUpdatedAt:"2024\u5e7411\u670811\u65e5",sidebarPosition:6,frontMatter:{sidebar_position:6,title:"\u5f31\u8fde\u63a5"},sidebar:"tutorialSidebar",previous:{title:"\u5206\u9875\u5b89\u5168\u6027",permalink:"/jimmer-doc/zh/docs/query/dynamic-join/table-ex"},next:{title:"Kotlin\u8868\u8fde\u63a5\u7279\u6709\u529f\u80fd",permalink:"/jimmer-doc/zh/docs/query/dynamic-join/kotlin-join"}},s={},m=[{value:"\u8981\u89e3\u51b3\u7684\u95ee\u9898",id:"\u8981\u89e3\u51b3\u7684\u95ee\u9898",level:2},{value:"\u4f7f\u7528\u65b9\u6cd5",id:"\u4f7f\u7528\u65b9\u6cd5",level:2},{value:"\u5b9a\u4e49\u8fde\u63a5\u6761\u4ef6",id:"\u5b9a\u4e49\u8fde\u63a5\u6761\u4ef6",level:3},{value:"\u4f7f\u7528\u8fde\u63a5\u6761\u4ef6",id:"\u4f7f\u7528\u8fde\u63a5\u6761\u4ef6",level:3}],c={toc:m};function k(e){let{components:n,...a}=e;return(0,r.kt)("wrapper",(0,t.Z)({},c,a,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"\u8981\u89e3\u51b3\u7684\u95ee\u9898"},"\u8981\u89e3\u51b3\u7684\u95ee\u9898"),(0,r.kt)("p",null,"\u4e4b\u524d\u6211\u4eec\u6240\u8ba8\u8bba\u7684\u6240\u6709\u8fde\u63a5\uff0c\u90fd\u4f9d\u8d56\u4e8e\u5b9e\u4f53\u5bf9\u8c61\u7684\u5173\u8054\u5c5e\u6027\uff0c\u8fd9\u610f\u5473\u7740\u8868\u8fde\u63a5\u603b\u662f\u548c\u4e3b\u5916\u952e\u76f8\u5173\u3002"),(0,r.kt)("p",null,"\u7136\u800c\uff0c\u6709\u65f6\u6211\u4eec\u9700\u8981\u57fa\u4e8e\u548c\u4e3b\u5916\u952e\u65e0\u5173\u7684\u5176\u4ed6\u4e1a\u52a1\u5c5e\u6027\u8fde\u63a5\u4e24\u5f20\u8868\u3002\u8fd9\u79cd\u76f8\u5bf9\u81ea\u7531\u7684\u8868\u8fde\u63a5\u867d\u7136\u7528\u5f97\u4e0d\u591a\uff0c\u4f46\u4e00\u65e6\u9700\u8981\u5c31\u5f88\u6709\u7528\u3002"),(0,r.kt)("p",null,"\u8fd9\u79cd\u573a\u666f\u4e0b\uff0c\u4f60\u6709\u4e24\u79cd\u9009\u62e9\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5229\u7528",(0,r.kt)("a",{parentName:"p",href:"../../mapping/advanced/join-sql"},"@JoinSql"),"\u58f0\u660e\u548c\u4e3b\u5916\u952e\u65e0\u5173\u7684ManyToMany\u5173\u8054\u5c5e\u6027\uff0c\u7136\u540e\u5229\u7528\u5173\u8054\u5c5e\u6027\u8fdb\u884cjoin"),(0,r.kt)("admonition",{parentName:"li",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"\u8fd9\u79cd\u65b9\u6cd5\u9002\u5408\u4e8e\u9ad8\u91cd\u7528\u6027\u7684\u573a\u5408\u3002\u5373\uff0c\u5bf9\u5e94\u7684\u8fde\u63a5\u64cd\u4f5c\u591a\u4e2a\u4e1a\u52a1\u573a\u666f\u90fd\u9700\u8981\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u65e0\u9700\u58f0\u660e\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u8054\u5c5e\u6027\uff0c\u76f4\u63a5\u7528\u672c\u6587\u8bb2\u89e3\u7684\u5f31\u8fde\u63a5"),(0,r.kt)("admonition",{parentName:"li",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"\u8fd9\u79cd\u65b9\u6cd5\u9002\u5408\u4e8e\u4f4e\u91cd\u7528\u6027\u7684\u573a\u5408\u3002\u5373\uff0c\u5bf9\u5e94\u7684\u8fde\u63a5\u64cd\u4f5c\u53ea\u6709\u4e2a\u522b\u4e1a\u52a1\u573a\u666f\u9700\u8981\uff0c\u4e0d\u613f\u4e3a\u6b64\u5728\u5b9e\u4f53\u4e2d\u5b9a\u4e49\u57fa\u4e8e",(0,r.kt)("a",{parentName:"p",href:"../../mapping/advanced/join-sql"},"@JoinSql"),"\u7684\u5173\u8054\u5c5e\u6027\u3002")))),(0,r.kt)("h2",{id:"\u4f7f\u7528\u65b9\u6cd5"},"\u4f7f\u7528\u65b9\u6cd5"),(0,r.kt)("h3",{id:"\u5b9a\u4e49\u8fde\u63a5\u6761\u4ef6"},"\u5b9a\u4e49\u8fde\u63a5\u6761\u4ef6"),(0,r.kt)("p",null,"\u8981\u4f7f\u7528\u5f31\u8fde\u63a5"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Java\u7528\u6237\u9700\u5148\u5b9e\u73b0",(0,r.kt)("inlineCode",{parentName:"p"},"WeakJoin"),"\u63a5\u53e3")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Kotlin\u7528\u6237\u9700\u8981\u5b9e\u73b0",(0,r.kt)("inlineCode",{parentName:"p"},"KWeakJoin"),"\u62bd\u8c61\u7c7b"))),(0,r.kt)(o.Z,{groupId:"language",mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="WeakJoin.java"',title:'"WeakJoin.java"'},"package org.babyfish.jimmer.sql.ast.table;\n\nimport org.babyfish.jimmer.sql.ast.Predicate;\n\npublic interface WeakJoin<ST extends Table<?>, TT extends Table<?>> {\n\n    Predicate on(ST source, TT target);\n}\n"))),(0,r.kt)(l.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="KWeakJoin.kt"',title:'"KWeakJoin.kt"'},"package org.babyfish.jimmer.sql.kt.ast.table\n\nabstract class KWeakJoin<S: Any, T: Any> /* \u7701\u7565\u8d85\u7c7b\u578b */ {\n\n    abstract fun on(\n        source: KNonNullTable<S>,\n        target: KNonNullTable<T>\n    ): KNonNullExpression<Boolean>\n\n    ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n}\n")))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5bf9\u4e8eJava\u800c\u8a00\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"WeakJoin"),"\u63a5\u53e3\u7684\u8303\u578b\u53c2\u6570\u5e94\u662f\u9884\u7f16\u8bd1\u5668\u4e3a\u5f53\u524d\u8868\u5b9e\u4f53\u548c\u76ee\u6807\u5b9e\u4f53\u751f\u6210\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Table"),"\u7c7b\uff0c\u4f8b\u5982"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"WeakJoin<BookTable, AuthorTable>"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5bf9\u4e8eKotlin\u800c\u8a00\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"KWeakJoin"),"\u62bd\u8c61\u7c7b\u7684\u8303\u578b\u53c2\u6570\u5e94\u4e3a\u5f53\u524d\u5b9e\u4f53\u548c\u76ee\u6807\u5b9e\u4f53\uff0c\u4f8b\u5982"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"KWeakJoin<Book, Author>")))),(0,r.kt)("p",null,"\u5f00\u53d1\u4eba\u5458\u9700\u8981\u81ea\u5b9a\u4e49\u4e00\u4e2a\u7c7b\uff0c\u5b9e\u73b0\u81ea\u5b9a\u4e49\u8868\u8fde\u63a5\u6761\u4ef6"),(0,r.kt)(o.Z,{groupId:"language",mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"private static class BookAuthorJoin implements WeakJoin<BookTable, AuthorTable> {\n\n    @Override\n    public Predicate on(BookTable source, AuthorTable target) {\n        return Predicate.and(\n            source.businessProp1().eq(target.businessPropA()),\n            source.businessProp2().eq(target.businessPropB())\n        );\n    }\n}\n"))),(0,r.kt)(l.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"private class BookAuthorJoin : KWeakJoin<Book, Author> {\n\n    override fun on(\n        source: KNonNullTable<Book>,\n        target: KNonNullTable<Author>\n    ): KNonNullExpression<Boolean> =\n        and(\n            source.businessProp1 eq target.businessPropA,\n            source.businessProp2 eq target.businessPropB\n        )\n}\n")))),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"WeakJoin"),"/",(0,r.kt)("inlineCode",{parentName:"p"},"KWeakJoin"),"\u662f\u4e00\u4e2a\u63a5\u53e3\uff0c\u4f46\u662f\uff0c\u5b9e\u73b0\u7c7b\u578b\u5fc5\u9700\u662f\u4e00\u4e2a\u7c7b\uff0c\u4e0d\u80fd\u662flambda")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u4e0d\u8981\u7528\u533f\u540d\u7c7b\u5b9e\u73b0\u3002\u533f\u540d\u7c7b\u867d\u7136\u53ef\u4ee5\u8fd0\u884c\uff0c\u4f46\u662f\u8fdd\u80cc\u8fd9\u91cc\u7684\u8bbe\u8ba1\u521d\u8877"),(0,r.kt)("p",{parentName:"li"},"\u5982\u679c\u8be5\u7c7b\u6ca1\u6709\u4efb\u4f55\u590d\u7528\u4ef7\u503c\uff0c\u5efa\u8bae\u5b9a\u4e49\u4e3a\u79c1\u6709\u7684\u9759\u6001\u5185\u90e8\u7c7b")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u8be5\u7c7b\u672c\u8eab\u4e0d\u5e26\u8303\u578b\u53c2\u6570\uff0c\u4f46\u662f\uff0c\u5fc5\u9700\u660e\u786e\u6307\u5b9a\u8d85\u63a5\u53e3/\u8d85\u7c7b\u7684\u8303\u578b\u53c2\u6570"))),(0,r.kt)("p",{parentName:"admonition"},"\u540e\u7eed\u8bba\u8ff0\u4e2d\uff0c\u4f1a\u89e3\u91ca\u4e3a\u4ec0\u4e48\u6709\u524d\u4e24\u70b9\u9650\u5236")),(0,r.kt)("p",null,"\u5f00\u53d1\u4eba\u5458\u751a\u81f3\u8fd8\u53ef\u4ee5\u4f7f\u7528",(0,r.kt)("a",{parentName:"p",href:"../native-sql"},"NativeSQL\u8868\u8fbe\u5f0f"),"\u6784\u5efa\u66f4\u968f\u610f\u7684\u8fde\u63a5\u6761\u4ef6\uff0c\u4f8b\u5982 ",(0,r.kt)("em",{parentName:"p"},"(\u8fd9\u91cc\u5047\u8bbe\u4f7f\u7528MySQL\uff0c\u53ef\u4ee5\u8c03\u7528SQL\u51fd\u6570",(0,r.kt)("inlineCode",{parentName:"em"},"substr"),")")),(0,r.kt)(o.Z,{groupId:"language",mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'private static class BookAuthorJoin implements WeakJoin<BookTable, AuthorTable> {\n\n    @Override\n    public Predicate on(BookTable source, AuthorTable target) {\n        return Predicate.sql(\n            "substr(%e, 1, 5) = substr(%e, 1, 5)",\n            new Expression[] {\n                source.code(),\n                target.code()\n            }\n        );\n    }\n}\n'))),(0,r.kt)(l.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},'private class BookAuthorJoin : KWeakJoin<Book, Author> {\n\n    override fun on(\n        source: KNonNullTable<Book>,\n        target: KNonNullTable<Author>\n    ): KNonNullExpression<Boolean> =\n        sql(Boolean::class, "substr(%e, 1, 5) = substr(%e, 1, 5)") {\n            expression(source.code)\n            expression(target.code)\n        }\n}\n')))),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"\u8fd9\u91cc\uff0cJava\u4ee3\u7801\u4e2d\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Predicate.sql"),"\u548cKotlin\u4ee3\u7801\u4e2d\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"sql"),"\uff0c\u662f\u5728Jimmer\u5f3a\u7c7b\u578bSQL DSL\u4e2d\u6df7\u5165\u539f\u751fSQL\u7247\u6bb5\u7684\u65b9\u6cd5\u3002"),(0,r.kt)("p",{parentName:"admonition"},"\u8fd9\u79cd\u65b9\u6cd5\u6211\u4eec\u4ece\u672a\u4ecb\u7ecd\u8fc7\uff0c\u8bf7\u53c2\u8003",(0,r.kt)("a",{parentName:"p",href:"../native-sql"},"NativeSQL\u8868\u8fbe\u5f0f"))),(0,r.kt)("h3",{id:"\u4f7f\u7528\u8fde\u63a5\u6761\u4ef6"},"\u4f7f\u7528\u8fde\u63a5\u6761\u4ef6"),(0,r.kt)(o.Z,{groupId:"language",mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'BookTable table = Tables.BOOK_TABLE;\n\nList<Long> bookIds = sqlClient\n    .createQuery(table)\n    .where(\n        table\n            .asTableEx() \u2776\n            .weakJoin(BookAuthorJoin.class) \u2777\n            .firstName().eq("Alex")\n    )\n    .select(table.id())\n    .distinct()\n    .execute();\n'))),(0,r.kt)(l.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},'val bookIds = sqlClient\n    .createQuery(Book::class) {\n        where(\n            table\n                .asTableEx() \u2776\n                .weakJoin(BookAuthorJoin::class) \u2777\n                .firstName eq "Alex"\n        )\n        select(table.id)\n    }\n    .distinct()\n    .execute();\n')))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u2776\u5904\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"asTableEx"),"\u628a",(0,r.kt)("inlineCode",{parentName:"p"},"Table"),"\u8f6c\u5316\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"TableEx")),(0,r.kt)("admonition",{parentName:"li",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"\u540e\u7eed\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"weakJoin"),"\u53ea\u88ab",(0,r.kt)("inlineCode",{parentName:"p"},"TableEx"),"\u652f\u6301\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"Table"),"\u4e0d\u652f\u6301\u6b64\u884c\u4e3a\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u2777\u5904\u4ee3\u7801\u8c03\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"weakJoin"),"\uff0c\u4ee5\u524d\u6587\u5b9a\u4e49\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"BookAuthorJoin"),"\u7c7b\u4f5c\u4e3a\u8fde\u63a5\u6761\u4ef6\uff0c\u8fde\u63a5\u5230author\u8868"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6b64\u5904\uff0cweakJoin\u7684\u8fd4\u56de\u7c7b\u578b\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"AuthorTable"),"/",(0,r.kt)("inlineCode",{parentName:"p"},"KNonNullTable<Author>"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u8fd9\u91cc\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"weakJoin"),"\u8868\u793a\u5185\u8fde\u63a5\uff0c\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u65b9\u6cd5\u652f\u6301\u5916\u8fde\u63a5"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Java: ",(0,r.kt)("inlineCode",{parentName:"p"},"weakJoin(BookAuthorJoin.class, JoinType.LEFT)"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Kotlin: ",(0,r.kt)("inlineCode",{parentName:"p"},"weakOuterJoin(BookAuthorJoin::class)")))))))),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"\u4e4b\u524d\u6211\u4eec\u4ecb\u7ecd\u8fc7\u4e00\u4e2a\u529f\u80fd\u70b9\uff0c",(0,r.kt)("a",{parentName:"p",href:"./merge"},"\u5408\u5e76\u51b2\u7a81\u8fde\u63a5"),"\u3002",(0,r.kt)("inlineCode",{parentName:"p"},"weakJoin"),"\u517c\u5bb9\u5b83\uff0c\u8fd9\u975e\u5e38\u91cd\u8981\u3002"),(0,r.kt)("p",{parentName:"admonition"},"\u5bf9\u540c\u4e00\u4e2ajoin\u8d77\u70b9\u800c\u8a00\uff0c\u5982\u679c\u591a\u6b21\u8c03\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"weakJoin"),"\uff0c\u53ea\u8981\u53c2\u6570\u4e2dWeakJoin\u7c7b ",(0,r.kt)("em",{parentName:"p"},"(\u8fd9\u91cc\u7684BookAuthorJoin\u7c7b)")," \u662f\u76f8\u540c\u7684\uff0c\u5b83\u4eec\u5c31\u80fd\u5408\u5e76\u6210\u4e00\u6b21\u8fde\u63a5\u64cd\u4f5c\uff0c\u4ece\u800c\u4fdd\u8bc1\u6700\u7ec8SQL\u4e2d\u6ca1\u6709\u91cd\u590d\u8fde\u63a5\u3002"),(0,r.kt)("p",{parentName:"admonition"},"\u8fd9\u5c31\u662f\u524d\u9762\u6240\u8bf4\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"BookAuthorJoin"),"\u8fd9\u79cd\u7c7b\u578b\u4e0d\u80fd\u7528lambda\u6216\u533f\u540d\u7c7b\u5b9e\u73b0\u7684\u539f\u56e0\u3002")))}k.isMDXComponent=!0}}]);