"use strict";(self.webpackChunkdocusaurus_code=self.webpackChunkdocusaurus_code||[]).push([[3487],{80420:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>h,contentTitle:()=>d,default:()=>m,frontMatter:()=>c,metadata:()=>p,toc:()=>u});var i=r(74848),t=r(28453),o=r(11470),s=r(19365),a=r(64087),l=r(74400);const c={sidebar_position:2,title:"MapStruct"},d=void 0,p={id:"object/view/mapstruct",title:"MapStruct",description:"\u7b80\u4ecb",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/object/view/mapstruct.mdx",sourceDirName:"object/view",slug:"/object/view/mapstruct",permalink:"/jimmer-doc/zh/docs/object/view/mapstruct",draft:!1,unlisted:!1,editUrl:"https://github.com/babyfish-ct/jimmer-doc/edit/main/i18n/zh/docusaurus-plugin-content-docs/current/object/view/mapstruct.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"MapStruct"},sidebar:"tutorialSidebar",previous:{title:"DTO\u8bed\u8a00",permalink:"/jimmer-doc/zh/docs/object/view/dto-language"},next:{title:"\u53ef\u89c1\u6027",permalink:"/jimmer-doc/zh/docs/object/visibility"}},h={},u=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"\u6ce8\u610f\u4e8b\u9879",id:"\u6ce8\u610f\u4e8b\u9879",level:3},{value:"\u4f18\u70b9",id:"\u4f18\u70b9",level:3},{value:"\u7f3a\u70b9",id:"\u7f3a\u70b9",level:3},{value:"\u4f9d\u8d56\u548c\u9884\u7f16\u8bd1\u5668",id:"\u4f9d\u8d56\u548c\u9884\u7f16\u8bd1\u5668",level:2},{value:"\u5b9a\u4e49POJO",id:"\u5b9a\u4e49pojo",level:2},{value:"\u5b9a\u4e49Mappper",id:"\u5b9a\u4e49mappper",level:2},{value:"\u5982\u679c\u5b9e\u4f53\u5b9a\u4e49\u4e86@IdView\u5c5e\u6027",id:"\u5982\u679c\u5b9e\u4f53\u5b9a\u4e49\u4e86idview\u5c5e\u6027",level:3},{value:"\u5982\u679c\u5b9e\u4f53\u672a\u5b9a\u4e49@IdView\u5c5e\u6027",id:"\u5982\u679c\u5b9e\u4f53\u672a\u5b9a\u4e49idview\u5c5e\u6027",level:3},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:2},{value:"\u8ba9POJO\u5b9e\u73b0Input\u63a5\u53e3",id:"\u8ba9pojo\u5b9e\u73b0input\u63a5\u53e3",level:2}];function j(n){const e={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{id:"\u7b80\u4ecb",children:"\u7b80\u4ecb"}),"\n",(0,i.jsxs)(e.p,{children:["Jimmer\u62d3\u5c55\u4e86",(0,i.jsx)(e.a,{href:"https://mapstruct.org/",children:"MapStruct"}),"\uff0c\u652f\u6301\u4f7f\u7528mapstruct\u6765\u5b8c\u6210Jimmer\u52a8\u6001\u5b9e\u4f53\u5bf9\u8c61\u548c\u9759\u6001DTO\u5bf9\u8c61\u4e4b\u95f4\u7684\u76f8\u4e92\u8f6c\u5316\u3002"]}),"\n",(0,i.jsx)(e.h3,{id:"\u6ce8\u610f\u4e8b\u9879",children:"\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,i.jsxs)(e.p,{children:["Jimmer\u7684\u5b9e\u4f53\u5bf9\u8c61\u662f\u52a8\u6001\u7684 ",(0,i.jsx)(e.em,{children:"(\u548cHibernate3\u5f15\u5165\u7684\u6807\u91cf\u5c5e\u6027\u60f0\u6027\u5316\u6bd4\u8f83\u7c7b\u4f3c)"}),"\uff0c\u8fd9\u662f\u8f83\u65e9\u7684",(0,i.jsx)(e.a,{href:"https://mapstruct.org/",children:"MapStruct"}),"\u672a\u66fe\u8003\u8651\u8fc7\u7684\u6a21\u5f0f\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u548c",(0,i.jsx)(e.a,{href:"https://mapstruct.org/",children:"MapStruct"}),"\u4ea4\u6d41\u540e\uff0c",(0,i.jsx)(e.a,{href:"https://mapstruct.org/",children:"MapStruct"}),"\u4f1a\u4ece",(0,i.jsx)(e.code,{children:"1.6.0"}),"\u5f00\u59cb\u652f\u6301\u8fd9\u79cd\u884c\u4e3a\u3002"]}),"\n",(0,i.jsx)(e.admonition,{type:"caution",children:(0,i.jsxs)(e.p,{children:["\u56e0\u6b64\uff0c\u8bf7\u5c3d\u53ef\u80fd\u4f7f\u7528",(0,i.jsx)(e.code,{children:"1.6.0"}),"\u6216\u66f4\u9ad8\u7248\u672c\u7684",(0,i.jsx)(e.a,{href:"https://mapstruct.org/",children:"MapStruct"}),"\u3002"]})}),"\n",(0,i.jsx)(e.h3,{id:"\u4f18\u70b9",children:"\u4f18\u70b9"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u548c\u8ffd\u6c42\u5feb\u901f\u5f00\u53d1\u4f46\u652f\u6301\u56fa\u5b9a\u8f6c\u5316\u903b\u8f91\u7684",(0,i.jsx)(e.a,{href:"./dto-language",children:"DTO\u8bed\u8a00"}),"\u4e0d\u540c\uff0c",(0,i.jsx)(e.a,{href:"https://mapstruct.org/",children:"mapstruct"}),"\u53ef\u4ee5\u5b9e\u73b0\u4efb\u610f\u590d\u6742\u7684\u8f6c\u5316\u903b\u8f91\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u548c",(0,i.jsx)(e.a,{href:"./dto-language",children:"DTO\u8bed\u8a00"}),"\u76f4\u63a5\u751f\u6210\u5168\u65b0\u7684DTO\u7c7b\u578b\u4e0d\u540c\uff0c",(0,i.jsx)(e.a,{href:"https://mapstruct.org/",children:"mapstruct"}),"\u53ef\u4ee5\u6574\u5408\u73b0\u6709\u7684DTO\u7c7b\u578b\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u7f3a\u70b9",children:"\u7f3a\u70b9"}),"\n",(0,i.jsxs)(e.p,{children:["\u66f4\u63a8\u8350\u4f7f\u7528",(0,i.jsx)(e.a,{href:"./dto-language",children:"DTO\u8bed\u8a00"}),"\uff0c\u539f\u56e0\u5982\u4e0b"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e0d\u53ef\u5ffd\u7565\u7684\u5f00\u53d1\u6210\u672c"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.a,{href:"./dto-language",children:"DTO\u8bed\u8a00"}),"\u4e3aJimmer\u91cf\u8eab\u5b9a\u5236\u7684\u65b9\u6848\uff0c\u5f00\u53d1\u6548\u7387\u662f\u7ed3\u5408\u5176\u4ed6\u4efb\u4f55\u6280\u672f\u65b9\u6848\u65e0\u6cd5\u6bd4\u62df\u7684\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e0d\u592a\u9002\u5408Output DTO"}),"\n",(0,i.jsxs)(e.p,{children:["DTO\u8bed\u8a00\u81ea\u52a8\u751f\u6210\u7684DTO\u7c7b\u578b\u5177\u5907\u5185\u7f6e\u7684",(0,i.jsx)(e.a,{href:"../../query/object-fetcher",children:"\u5bf9\u8c61\u6293\u53d6\u5668"}),"\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f5c\u4e3a\u67e5\u8be2\u7684\u8f93\u51fa\u7c7b\u578b ",(0,i.jsx)(e.em,{children:"(\u867d\u7136\u4e0d\u63a8\u8350)"}),"\uff0c\u8bf7\u53c2\u89c1\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"../../query/object-fetcher/dto",children:"\u5bf9\u8c61\u6293\u53d6\u5668/DTO\u67e5\u8be2"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"../../spring/repository/dto",children:"Spring Data/\u67e5\u8be2DTO"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u7136\u800c\uff0c\u624b\u52a8\u5b9a\u4e49\u7684DTO\u7c7b\u578b\u6ca1\u6709\u5bf9\u5e94\u7684",(0,i.jsx)(e.a,{href:"../../query/object-fetcher",children:"\u5bf9\u8c61\u6293\u53d6\u5668"}),"\u5b9a\u4e49\uff0c\u53ea\u652f\u6301\u548c\u52a8\u6001\u5b9e\u4f53\u76f8\u4e92\u8f6c\u5316\u3002\n\u867d\u7136\u53ef\u4ee5\u4e3a\u6b64\u624b\u52a8\u5b9a\u4e49",(0,i.jsx)(e.a,{href:"../../query/object-fetcher",children:"\u5bf9\u8c61\u6293\u53d6\u5668"}),"\uff0c\u4f46\u662f\u5b58\u5728DTO\u548c",(0,i.jsx)(e.a,{href:"../../query/object-fetcher",children:"\u5bf9\u8c61\u6293\u53d6\u5668"}),"\u5f62\u72b6\u4e0d\u4e00\u81f4\u7684\u98ce\u9669\u3002\n\u6240\u4ee5\uff0c\u4e0d\u9002\u5408\u4f5c\u4e3aOutput DTO\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Kotlin\u98ce\u9669"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.a,{href:"https://mapstruct.org/",children:"mapstruct"}),"\u662f\u57fa\u4e8e",(0,i.jsx)(e.code,{children:"apt"}),(0,i.jsx)(e.em,{children:"(Annotation Processor)"})," \u7684\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u56e0\u6b64\uff0c\u8fd9\u9700\u8981\u5728kotlin\u4e2d\u4f7f\u7528",(0,i.jsx)(e.code,{children:"kapt"}),"\uff0c\u8fd9\u4f1a\u660e\u663e\u964d\u4f4ekotlin\u9879\u76ee\u7684\u7f16\u8bd1\u901f\u5ea6\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["Kotlin\u5df2\u7ecf\u5e9f\u5f03\u4e86",(0,i.jsx)(e.a,{href:"https://kotlinlang.org/docs/kapt.html",children:"kapt"}),"\uff0c\u800c\u4e3b\u5f20\u4f7f\u7528",(0,i.jsx)(e.a,{href:"https://kotlinlang.org/docs/ksp-overview.html",children:"ksp"}),"\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u56e0\u6b64\uff0c\u968f\u7740Kotlin\u7684\u6f14\u5316\uff0c\u672a\u6765\u4f7f\u7528",(0,i.jsx)(e.code,{children:"kapt"}),"\u53ef\u80fd\u4f1a\u9047\u5230\u95ee\u9898\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u4f9d\u8d56\u548c\u9884\u7f16\u8bd1\u5668",children:"\u4f9d\u8d56\u548c\u9884\u7f16\u8bd1\u5668"}),"\n",(0,i.jsx)(e.p,{children:"\u5bf9\u4e8e\u5c06\u9759\u6001POJO\u8f6c\u5316\u4e3aJimmer\u52a8\u6001\u5bf9\u8c61\u800c\u8a00\uff0cMapStruct\u5e76\u4e0d\u77e5\u9053\u8be5\u5982\u4f55\u6784\u5efaJimmer\u5bf9\u8c61\u3002\u56e0\u6b64"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["Jimmer\u672c\u8eab\u7684\u9884\u7f16\u8bd1\u5668 ",(0,i.jsxs)(e.em,{children:["(Java\u7684",(0,i.jsx)(e.code,{children:"jimmer-apt"}),"\u6216Kotlin\u7684",(0,i.jsx)(e.code,{children:"jimmer-ksp"}),")"]})," \u5728Draft\u4e2d\u751f\u6210\u4e86\u4e00\u4e2a\u4e00\u4e9b\u9762\u5411MapStruct\u7684\u4ee3\u7801\uff0c\u8ba9MapStruct\u53ef\u4ee5\u901a\u8fc7\u5176",(0,i.jsx)(e.a,{href:"https://mapstruct.org/documentation/stable/reference/html/#mapping-with-builders",children:"Builder"}),"\u6a21\u5f0f\u6784\u5efaJimmer\u5bf9\u8c61\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Jimmer\u6269\u5c55\u4e86MapStruct\u7684Annotation Processor\uff0c\u8be5\u6269\u5c55\u8ba9MapStruct\u5229\u7528\u751f\u6210\u7684Draft\u4e2d\u4e3aMapStruct\u9884\u7559\u7684\u80fd\u529b\u6784\u5efaJimmer\u5bf9\u8c61\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u8fd9\u4e2a\u6269\u5c55\u53eb\u505a",(0,i.jsx)(e.code,{children:"jimmer-mapstruct-apt"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5bf9\u4e8eJava\u800c\u8a00\uff0c",(0,i.jsx)(e.code,{children:"jimmer-mapstruct-apt"}),"\u88ab",(0,i.jsx)(e.code,{children:"jimmer-apt"}),"\u6240\u5305\u542b"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5bf9\u4e8eKotlin\u800c\u8a00\uff0c\u9700\u540c\u65f6\u5728maven\u6216gradle\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528",(0,i.jsx)(e.code,{children:"jimmer-ksp"}),"\u548c",(0,i.jsx)(e.code,{children:"jimmer-mapstruct-apt"}),"\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5982\u679c\u4f7f\u7528",(0,i.jsx)(e.a,{href:"https://github.com/ArgonarioD/gradle-plugin-jimmer",children:"Gradle\u63d2\u4ef6"}),"\uff0c\u5f53\u4f60\u5f15\u5165\u4e86MapStruct\u7684kapt\u4f9d\u8d56\u65f6\uff0c\u63d2\u4ef6\u4f1a\u81ea\u52a8\u5f15\u5165",(0,i.jsx)(e.code,{children:"jimmer-mapstruct-apt"}),"\u7684\u4f9d\u8d56\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(o.A,{groupId:"buildTool",children:[(0,i.jsx)(s.A,{value:"java_maven",label:"Java(Maven)",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",metastring:'title="pom.xml"',children:"...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n\n<build>\n    <dependencies>\n        <dependency> \u2780\n            <groupId>org.projectlombok</groupId>\n            <artifactId>lombok</artifactId>\n            <version>${lombok.version}</version>\n        </dependency>\n        <dependency> \u278a\n            <groupId>org.mapstruct</groupId>\n            <artifactId>mapstruct</artifactId>\n            <version>${mapstruct.version}</version>\n        </dependency>\n        ...\u7701\u7565\u5176\u4ed6\u4f9d\u8d56...\n    </dependencies>\n    <plugins>\n        <plugin>\n            <groupId>org.apache.maven.plugins</groupId>\n            <artifactId>maven-compiler-plugin</artifactId>\n            <version>3.10.1</version>\n            <configuration>\n                <annotationProcessorPaths>\n                    <path> \u2781\n                        <groupId>org.projectlombok</groupId>\n                        <artifactId>lombok</artifactId>\n                        <version>${lombok.version}</version>\n                    </path>\n                    <path> \u278b\n                        <groupId>org.babyfish.jimmer</groupId>\n                        <artifactId>jimmer-apt</artifactId>\n                        <version>${jimmer.version}</version>\n                    </path>\n                    <path> \u278c\n                        <groupId>org.mapstruct</groupId>\n                        <artifactId>mapstruct-processor</artifactId>\n                        <version>${mapstruct.version}</version>\n                    </path>\n                </annotationProcessorPaths>\n            </configuration>\n        </plugin>\n    </plugins>\n</build>\n\n...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n"})})}),(0,i.jsx)(s.A,{value:"kotlin_maven",label:"Kotlin(Maven)",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",metastring:'title="pom.xml"',children:"...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n\n<build>\n    <sourceDirectory>src/main/kotlin</sourceDirectory>\n    <testSourceDirectory>src/test/kotlin</testSourceDirectory>\n\n    <dependencies>\n        <dependency> \u278a\n            <groupId>org.mapstruct</groupId>\n            <artifactId>mapstruct</artifactId>\n            <version>${mapstruct.version}</version>\n        </dependency>\n        ...\u7701\u7565\u5176\u4ed6\u4f9d\u8d56...\n    </dependencies>\n\n    <plugins>\n        <plugin>\n            <groupId>org.jetbrains.kotlin</groupId>\n            <artifactId>kotlin-maven-plugin</artifactId>\n            <version>${kotlin.version}</version>\n            <executions>\n                <execution>\n                    <id>compile</id>\n                    <phase>compile</phase>\n                    <goals>\n                        <goal>compile</goal>\n                    </goals>\n                </execution>\n                <execution>\n                    <id>test-compile</id>\n                    <phase>test-compile</phase>\n                    <goals>\n                        <goal>test-compile</goal>\n                    </goals>\n                </execution>\n            </executions>\n            <configuration>\n                <compilerPlugins>\n                    <compilerPlugin>ksp</compilerPlugin>\n                </compilerPlugins>\n                <annotationProcessorPaths>\n                    <path>\n                        <groupId>org.mapstruct</groupId> \u278c\n                        <artifactId>mapstruct-processor</artifactId>\n                        <version>${mapstruct.version}</version>\n                    </path>\n                    <path>\n                        <groupId>org.babyfish.jimmer</groupId> \u24d0\n                        <artifactId>jimmer-mapstruct-apt</artifactId>\n                        <version>${jimmer.version}</version>\n                    </path>\n                </annotationProcessorPaths>\n            </configuration>\n            <dependencies>\n                <dependency>\n                    <groupId>com.dyescape</groupId>\n                    <artifactId>kotlin-maven-symbol-processing</artifactId>\n                    <version>1.3</version>\n                </dependency>\n                <dependency>\n                    <groupId>org.babyfish.jimmer</groupId> \u278b\n                    <artifactId>jimmer-ksp</artifactId>\n                    <version>${jimmer.version}</version>\n                </dependency>\n            </dependencies>\n        </plugin>\n    </plugins>\n</build>\n\n...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n"})})}),(0,i.jsx)(s.A,{value:"java_gradle",label:"Java(Gradle)",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-groovy",metastring:'title="build.gradle"',children:'dependencies {\n    \n    implementation "org.projectlombok:lombok:${lombok.version}" \u2780\n    implementation "org.mapstruct:mapstruct:${mapstructVersion}" \u278a\n\n    annotationProcessor "org.projectlombok:lombok:${lombok.version}" \u2781\n    annotationProcessor "org.babyfish.jimmer:jimmer-apt:${jimmerVersion}" \u278b\n    annotationProcessor "org.mapstruct:mapstruct-processor:${mapstructVersion}" \u278c\n\n    ...\u7701\u7565\u5176\u4ed6\u4f9d\u8d56...\n}\n'})})}),(0,i.jsx)(s.A,{value:"kotlin_gradle",label:"Kotlin(Gradle.kts)",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-kotlin",metastring:'title="build.gradle.kts"',children:'plugins {\n    id("com.google.devtools.ksp") version "1.7.10-1.0.6"\n    kotlin("kapt") version "1.7.10"\n\n    ...\u7701\u7565\u5176\u4ed6\u63d2\u4ef6...\n}\n\ndependencies {\n    \n    implementation("org.mapstruct:mapstruct:${mapstructVersion}") \u278a\n\n    ksp("org.babyfish.jimmer:jimmer-ksp:${jimmerVersion}") \u278b\n    kapt("org.mapstruct:mapstruct-processor:${mapstructVersion}") \u278c\n\tkapt("org.babyfish.jimmer:jimmer-mapstruct-apt:${jimmerVersion}") \u24d0\n\n    ...\u7701\u7565\u5176\u4ed6\u4f9d\u8d56...\n}\n\nkotlin {\n    sourceSets.main {\n        kotlin.srcDir("build/generated/ksp/main/kotlin")\n    }\n}\n'})})}),(0,i.jsx)(s.A,{value:"java_gradle_plugin",label:"Java(Gradle\u63d2\u4ef6)",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-groovy",metastring:'title="build.gradle"',children:'plugins {\n    id "tech.argonariod.gradle-plugin-jimmer" version "latest.release"\n\n    ...\u7701\u7565\u5176\u4ed6\u63d2\u4ef6...\n}\n\njimmer {\n    version = "${jimmerVersion}"\n\n    ...\u7701\u7565\u5176\u4ed6\u914d\u7f6e...\n}\n\ndependencies {\n\n    implementation "org.projectlombok:lombok:${lombok.version}" \u2780\n    implementation "org.mapstruct:mapstruct:${mapstructVersion}" \u278a\n\n    annotationProcessor "org.projectlombok:lombok:${lombok.version}" \u2781\n    annotationProcessor "org.mapstruct:mapstruct-processor:${mapstructVersion}" \u278d\n    \n    // \u4e0d\u9700\u8981\u624b\u52a8\u6dfb\u52a0 org.babyfish.jimmer:jimmer-apt \u7684\u4f9d\u8d56\n    // \u68c0\u6d4b\u5230 mapstruct-processor \u65f6\uff0c\u63d2\u4ef6\u4f1a\u81ea\u52a8\u6dfb\u52a0\u8be5\u4f9d\u8d56\n\n    ...\u7701\u7565\u5176\u4ed6\u4f9d\u8d56...\n}\n'})})}),(0,i.jsx)(s.A,{value:"kotlin_gradle_plugin",label:"Kotlin(Gradle\u63d2\u4ef6)",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-kotlin",metastring:'title="build.gradle.kts"',children:'plugins {\n    id("tech.argonariod.gradle-plugin-jimmer") version "latest.release"\n    id("com.google.devtools.ksp") version "1.7.10+"\n    kotlin("kapt") version "1.7.10"\n\n    ...\u7701\u7565\u5176\u4ed6\u63d2\u4ef6...\n}\n\njimmer {\n    version = "${jimmerVersion}"\n\n    ...\u7701\u7565\u5176\u4ed6\u914d\u7f6e...\n}\n\ndependencies {\n    \n    implementation("org.mapstruct:mapstruct:${mapstructVersion}") \u278a\n    kapt("org.mapstruct:mapstruct-processor:${mapstructVersion}") \u278c\n\n    ...\u7701\u7565\u5176\u4ed6\u4f9d\u8d56...\n}\n'})})})]}),"\n",(0,i.jsxs)(e.p,{children:["\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u5047\u8bbeJava\u4e2d\u57fa\u4e8e",(0,i.jsx)(e.a,{href:"https://projectlombok.org/",children:"lombok"}),"\u7f16\u5199\u9759\u6001POJO\u3002"]}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"\u8bed\u8a00"}),(0,i.jsx)("th",{children:"\u4f4d\u7f6e"}),(0,i.jsx)("th",{children:"\u63cf\u8ff0"})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{rowspan:"3",children:"Java\u548cKotlin"}),(0,i.jsx)("td",{children:"\u278a"}),(0,i.jsx)("td",{children:"\u5f15\u5165mapstruct\u4f9d\u8d56\uff0c\u8ba9\u7528\u6237\u4ee3\u7801\u53ef\u4ee5\u4f7f\u7528mapstruct\u7684\u6ce8\u89e3"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"\u278b"}),(0,i.jsxs)("td",{children:["\u4f7f\u7528Jimmer\u7684\u9884\u7f16\u8bd1\u5668\u4e3a\u52a8\u6001\u7c7b\u578b\u751f\u6210\u76f8\u5173\u7684\u6e90\u4ee3\u7801\uff0cJava\u4f7f\u7528",(0,i.jsx)(e.code,{children:"jimmer-apt"}),"\uff0cKotlin\u4f7f\u7528",(0,i.jsx)(e.code,{children:"jimmer-ksp"})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"\u278c"}),(0,i.jsxs)("td",{children:["\u4f7f\u7528mapstruct\u7684annotation processor\u751f\u6210\u6e90\u4ee3\u7801 ",(0,i.jsx)("i",{children:"(\u540e\u6587\u4f1a\u4ecb\u7ecd)"})," "]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{rowspan:"2",children:"\u4ec5Java"}),(0,i.jsx)("td",{children:"\u2780"}),(0,i.jsx)("td",{children:"\u5f15\u5165lombok\u7684\u4f9d\u8d56\uff0c\u8ba9\u7528\u6237\u4ee3\u7801\u53ef\u4ee5\u4f7f\u7528lombok\u7684\u6ce8\u89e3"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"\u2781"}),(0,i.jsx)("td",{children:"\u4f7f\u7528Lombok\u7684\u9884\u7f16\u8bd1\u5668\u66f4\u6539\u9759\u6001POJO\u7c7b\u7684\u4ee3\u7801\uff0c\u6bd4\u5982\u6dfb\u52a0getter, setter"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{rowspan:"2",children:"\u4ec5Kotlin"}),(0,i.jsx)("td",{children:"\u24d0"}),(0,i.jsxs)("td",{children:["\u4f7f\u7528",(0,i.jsx)(e.code,{children:"jimmer-mapstruct-apt"}),"\u62d3\u5c55\u278c"]})]})]})]}),"\n",(0,i.jsx)(e.h2,{id:"\u5b9a\u4e49pojo",children:"\u5b9a\u4e49POJO"}),"\n",(0,i.jsxs)(o.A,{groupId:"language",children:[(0,i.jsx)(s.A,{value:"java",label:"Java",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",metastring:'title="BookInput.java"',children:"@Data\npublic class BookInput {\n\n    @Nullable\n    private Long id;\n\n    private String name;\n\n    private int edition;\n\n    private BigDecimal price;\n\n    @Nullable\n    private Long storeId;\n\n    private List<Long> authorIds;\n}\n"})})}),(0,i.jsx)(s.A,{value:"kotlin",label:"Kotlin",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-kotlin",metastring:'title="BookInput.java"',children:"data class BookInput(\n    val id: Long? = null,\n    val name: String,\n    val edition: Int,\n    val price: BigDecimal,\n    val storeId: Long?,\n    val authorIds: List<Long>\n)\n"})})})]}),"\n",(0,i.jsx)(e.admonition,{type:"note",children:(0,i.jsxs)(e.p,{children:["Java POJO\u4ee3\u7801\u4e2d\u91c7\u7528\u4e86",(0,i.jsx)(e.code,{children:"@Nullable"}),"\u6ce8\u89e3\uff0c\u4ec5\u4e3a\u63d0\u9ad8\u53ef\u8bfb\u6027\uff0c\u65e0\u5b9e\u8d28\u6027\u529f\u80fd"]})}),"\n",(0,i.jsx)(e.p,{children:"\u8be5POJO\u6709\u4e09\u4e2a\u5c5e\u6027\uff0c\u9700\u8981\u8bf4\u660e\u4e00\u4e0b"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.code,{children:"BookInput.id"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u8fd9\u91cc\uff0c",(0,i.jsx)(e.code,{children:"BookInput.id"}),"\u662f\u5141\u8bb8\u4e3anull\u7684\u3002\u8fd9\u662f\u5fc5\u8981\u7684\uff0c\u6bd4\u5982\uff0c\u63d2\u5165\u6570\u636e\u4e0d\u9700\u8981\u6307\u5b9aid\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5b9e\u4f53\u5bf9\u8c61\u52a8\u6001\u5c5e\u6027",(0,i.jsx)(e.code,{children:"Book.id"}),"\u4e0d\u5141\u8bb8\u4e3anull ",(0,i.jsxs)(e.em,{children:["(Jimmer\u7981\u6b62id\u53ef\u4ee5\u4e3anull\uff0c\u8bf7\u53c2\u89c1",(0,i.jsx)(e.a,{href:"../../mapping/base/basic#id",children:"\u6620\u5c04\u7bc7/\u57fa\u7840\u6620\u5c04/\u7b80\u5355\u6620\u5c04#@Id"}),")"]})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u4e8c\u8005\u5f7c\u6b64\u77db\u76fe\uff0c\u90a3\u4e48\uff0c",(0,i.jsx)(e.code,{children:"BookInput"}),"\u600e\u4e48\u8f6c\u5316\u4e3a",(0,i.jsx)(e.code,{children:"Book"}),"\u5462\uff1f"]}),"\n",(0,i.jsx)(e.admonition,{type:"tip",children:(0,i.jsx)(e.p,{children:"Jimmer\u7ea6\u5b9a\uff0c\u5982\u679cPOJO\u7684\u5c5e\u6027\u53ef\u4e3anull\u800c\u52a8\u6001\u5bf9\u8c61\u4e0a\u5bf9\u5e94\u7684\u5c5e\u6027\u4e0d\u80fd\u4e3anull\uff0c\u90a3\u4e48\u52a8\u6001\u5bf9\u8c61\u7684\u5bf9\u5e94\u5c5e\u6027\u4e0d\u4f1a\u88ab\u8d4b\u503c\uff0c\u4fdd\u6301\u7f3a\u5931\u7684\u72b6\u6001\u3002"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.code,{children:"BookInput.storeId"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5f88\u660e\u663e\uff0c\u8fd9\u662f\u5173\u8054id\uff0c\u5bf9\u5b9e\u4f53\u5bf9\u8c61\u52a8\u6001\u5c5e\u6027",(0,i.jsx)(e.code,{children:"Book.store"}),"\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u8fd9\u79cd\u52a8\u6001\u5bf9\u8c61\u5c5e\u6027\u88ab\u5b9a\u4e49\u4e3a\u5173\u8054\u5bf9\u8c61\uff0c\u800cPOJO\u4e2d\u5374\u5b9a\u4e49\u4e3a\u5173\u8054id\uff0c\u53eb\u505a",(0,i.jsx)(l.l,{buttonText:"\u77ed\u5173\u8054",children:(0,i.jsx)(a.M,{})})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.code,{children:"BookInput.authorIds"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5f88\u660e\u663e\uff0c\u8fd9\u662f\u5173\u8054id\u96c6\u5408\uff0c\u5bf9\u5b9e\u4f53\u5bf9\u8c61\u52a8\u6001\u5c5e\u6027",(0,i.jsx)(e.code,{children:"Book.authors"}),"\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u8fd9\u79cd\u52a8\u6001\u5bf9\u8c61\u5c5e\u6027\u88ab\u5b9a\u4e49\u4e3a\u5173\u8054\u5bf9\u8c61\uff0c\u800cPOJO\u4e2d\u5374\u5b9a\u4e49\u4e3a\u5173\u8054id\uff0c\u53eb\u505a",(0,i.jsx)(l.l,{buttonText:"\u77ed\u5173\u8054",children:(0,i.jsx)(a.M,{})})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5176\u4ed6\u5c5e\u6027\u548c\u539f\u59cb\u5b9e\u4f53\u7684\u5b9a\u4e49\u5b8c\u5168\u4e00\u6837\uff0c\u65e0\u9700\u8bf4\u660e"}),"\n",(0,i.jsx)(e.h2,{id:"\u5b9a\u4e49mappper",children:"\u5b9a\u4e49Mappper"}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528mapstruct\u6700\u91cd\u8981\u7684\u4e8b\u662f\u5b9a\u4e49Mapper\uff0c\u5982\u4e0b"}),"\n",(0,i.jsxs)(o.A,{groupId:"language",children:[(0,i.jsx)(s.A,{value:"java",label:"Java",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",metastring:'title="BookInputMapper.java"',children:"@Mapper\npublic interface BookInputMapper {\n\n    @BeanMapping(unmappedTargetPolicy = ReportingPolicy.IGNORE)\n    Book toBook(BookInput input);\n}\n"})})}),(0,i.jsx)(s.A,{value:"kotlin",label:"Kotlin",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-kotlin",metastring:'title="BookInputMapper.java"',children:"@Mapper\ninterface BookInputMapper {\n\n    @BeanMapping(unmappedTargetPolicy = ReportingPolicy.IGNORE)\n    fun toBook(input: BookInput): Book\n}\n"})})})]}),"\n",(0,i.jsxs)(e.p,{children:["\u8be5Mapper\u63d0\u4f9b\u4e00\u4e2a",(0,i.jsx)(e.code,{children:"toBook"}),"\u65b9\u6cd5\uff0c\u7528\u4e8e\u628a",(0,i.jsx)(e.code,{children:"BookInput"}),"\u5bf9\u8c61\u8f6c\u5316\u4e3a",(0,i.jsx)(e.code,{children:"Book"}),"\u5bf9\u8c61\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"BookInput.id"}),"\u3001",(0,i.jsx)(e.code,{children:"BookInput.id"}),"\u3001",(0,i.jsx)(e.code,{children:"BookInput.name"}),"\u548c",(0,i.jsx)(e.code,{children:"BookInput.price"}),"\u90fd\u662f\u975e\u5173\u8054\u5c5e\u6027\uff0cmapstruct\u80fd\u5f88\u597d\u5730\u5904\u7406\u5b83\u4eec\u3002"]}),"\n",(0,i.jsx)(e.admonition,{type:"note",children:(0,i.jsxs)(e.p,{children:["\u5176\u4e2d\uff0c",(0,i.jsx)(e.code,{children:"BookInput.id"}),"\u53ef\u4ee5\u4e3anull, \u800c",(0,i.jsx)(e.code,{children:"Book.id"}),"\u4e0d\u80fd\u4e3anull\u7684\u95ee\u9898\uff0c\u524d\u9762\u5df2\u7ecf\u8ba8\u8bba\u8fc7\u4e86\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002"]})}),"\n",(0,i.jsxs)(e.p,{children:["\u5173\u952e\u662f",(0,i.jsx)(e.code,{children:"BookInput.storeId"}),"\u548c",(0,i.jsx)(e.code,{children:"BookInput.authorIds"}),"\u5e94\u8be5\u5982\u4f55\u6620\u5c04\uff0c\u8fd9\u5206\u4e3a\u4e24\u79cd\u60c5\u51b5\u4e86\u3002"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b9e\u4f53\u5b9a\u4e49\u4e86@IdView\u5c5e\u6027"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b9e\u4f53\u672a\u5b9a\u4e49@IdView\u5c5e\u6027"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u5982\u679c\u5b9e\u4f53\u5b9a\u4e49\u4e86idview\u5c5e\u6027",children:"\u5982\u679c\u5b9e\u4f53\u5b9a\u4e49\u4e86@IdView\u5c5e\u6027"}),"\n",(0,i.jsxs)(e.p,{children:["\u5982\u679c\u5b9e\u4f53\u7c7b\u578b\u5b9a\u4e49\u4e86",(0,i.jsx)(e.code,{children:"@IdView"}),"\u5c5e\u6027\uff0c\u4f8b\u5982"]}),"\n",(0,i.jsxs)(o.A,{groupId:"language",children:[(0,i.jsx)(s.A,{value:"java",label:"Java",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",metastring:'title="Book.java"',children:'package com.example.model;\n\nimport org.babyfish.jimmer.sql.*;\nimport org.jetbrains.annotations.Nullable;\n\n@Entity\npublic interface Book {\n\n    ...\u7701\u7565\u5176\u4ed6\u5c5e\u6027...\n\n    @ManyToOne\n    @Nullable\n    BookStore store();\n\n    @ManyToMany\n    @JoinTable(\n        name = "BOOK_AUTHOR_MAPPING",\n        joinColumnName = "BOOK_ID",\n        inverseJoinColumnName = "AUTHOR_id"\n    )\n    List<Author> authors();\n\n    // highlight-next-line\n    @IdView // \u5173\u8054\u5bf9\u8c61store\u7684id\u7684\u89c6\u56fe\n    Long storeId();\n\n    // \u5173\u8054\u5bf9\u8c61\u96c6\u5408authors\u4e2d\u6240\u6709\u5bf9\u8c61\u7684id\u7684\u89c6\u56fe\n    // highlight-next-line\n    @IdView("authors") \n    List<Long> authorIds();\n}\n'})})}),(0,i.jsx)(s.A,{value:"kotlin",label:"Kotlin",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-kotlin",metastring:'title="Book.kt"',children:'package com.example.model\n\nimport org.babyfish.jimmer.sql.*\n\n@Entity\ninterface Book {\n\n    ...\u7701\u7565\u5176\u4ed6\u5c5e\u6027...\n\n    @ManyToOne\n    val store: BookStore?\n\n    @ManyToMany\n    @JoinTable(\n        name = "BOOK_AUTHOR_MAPPING",\n        joinColumnName = "BOOK_ID",\n        inverseJoinColumnName = "AUTHOR_id"\n    )\n    val authors: List<Auhtor>\n\n    // highlight-next-line\n    @IdView // \u5173\u8054\u5bf9\u8c61store\u7684id\u7684\u89c6\u56fe\n    val storeId: Long?\n\n    // \u5173\u8054\u5bf9\u8c61\u96c6\u5408authors\u4e2d\u6240\u6709\u5bf9\u8c61\u7684id\u7684\u89c6\u56fe\n    // highlight-next-line\n    @IdView("authors") \n    val authorIds: List<Long>\n}\n'})})})]}),"\n",(0,i.jsx)(e.p,{children:"\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b9e\u4f53\u5bf9\u8c61\u548cPOJO\u5b8c\u5168\u5bf9\u5e94\uff0cMapper\u65e0\u9700\u505a\u4efb\u4f55\u4fee\u6539\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"\u5982\u679c\u5b9e\u4f53\u672a\u5b9a\u4e49idview\u5c5e\u6027",children:"\u5982\u679c\u5b9e\u4f53\u672a\u5b9a\u4e49@IdView\u5c5e\u6027"}),"\n",(0,i.jsxs)(e.p,{children:["\u5982\u679c\u5b9e\u4f53\u7c7b\u578b\u5e76\u4e3a\u5b9a\u4e49",(0,i.jsx)(e.code,{children:"@IdView"}),"\u5c5e\u6027\uff0c\u9700\u8981\u4fee\u6539Mapper"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5c06",(0,i.jsx)(e.code,{children:"BookInput.storeId"}),"\u8f6c\u5316\u4e3a\u53ea\u6709id\u7684",(0,i.jsx)(e.code,{children:"BookStore"}),"\u5bf9\u8c61\uff0c\u518d\u8d4b\u7ed9",(0,i.jsx)(e.code,{children:"Book.store"})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5c06",(0,i.jsx)(e.code,{children:"BookInput.authorIds"}),"\u8f6c\u5316\u4e3a\u53ea\u6709id\u7684",(0,i.jsx)(e.code,{children:"Author"}),"\u5bf9\u8c61\u7684\u96c6\u5408\uff0c\u518d\u8d4b\u7ed9",(0,i.jsx)(e.code,{children:"Book.authors"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(o.A,{groupId:"language",children:[(0,i.jsx)(s.A,{value:"java",label:"Java",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",metastring:'title="BookInputMapper.java"',children:'@Mapper\npublic interface BookInputMapper {\n\n    @BeanMapping(unmappedTargetPolicy = ReportingPolicy.IGNORE)\n    // highlight-next-line\n    @Mapping(target = "store", source = "storeId")\n    // highlight-next-line\n    @Mapping(target = "authors", source = "authorIds")\n    Book toBook(BookInput input);\n\n    @BeanMapping(ignoreByDefault = true)\n    // highlight-next-line\n    @Mapping(target = "id", source = ".")\n    BookStore toBookStore(Long id);\n\n    @BeanMapping(ignoreByDefault = true)\n    // highlight-next-line\n    @Mapping(target = "id", source = ".")\n    Author toAuthor(Long id);\n}\n'})})}),(0,i.jsx)(s.A,{value:"kotlin",label:"Kotlin",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-kotlin",metastring:'title="BookInputMapper.java"',children:'@Mapper\ninterface BookInputMapper {\n\n    @BeanMapping(unmappedTargetPolicy = ReportingPolicy.IGNORE)\n    // highlight-next-line\n    @Mapping(target = "store", source = "storeId")\n    // highlight-next-line\n    @Mapping(target = "authors", source = "authorIds")\n    fun toBook(input: BookInput): Book\n\n    @BeanMapping(ignoreByDefault = true)\n    // highlight-next-line\n    @Mapping(target = "id", source = ".")\n    fun toBookStore(id: Long?): BookStore\n\n    @BeanMapping(ignoreByDefault = true)\n    // highlight-next-line\n    @Mapping(target = "id", source = ".")\n    fun toAuthor(id: Long?): Author\n}\n'})})})]}),"\n",(0,i.jsxs)(e.p,{children:["\u7531\u4e8emapstruct\u8fd8\u652f\u6301",(0,i.jsx)(e.code,{children:'@Mapping(target = "store.id", source = "storeId")'}),"\u7684\u5199\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u5199\u6cd5\u6765\u7b80\u5316\u4ee3\u7801"]}),"\n",(0,i.jsxs)(o.A,{groupId:"language",children:[(0,i.jsx)(s.A,{value:"java",label:"Java",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",metastring:'title="BookInputMapper.java"',children:'@Mapper\npublic interface BookInputMapper {\n\n    @BeanMapping(unmappedTargetPolicy = ReportingPolicy.IGNORE)\n    // highlight-next-line\n    @Mapping(target = "store.id", source = "storeId")\n    @Mapping(target = "authors", source = "authorIds")\n    Book toBook(BookInput input);\n\n    @BeanMapping(ignoreByDefault = true)\n    @Mapping(target = "id", source = ".")\n    Author toAuthor(Long id);\n}\n'})})}),(0,i.jsx)(s.A,{value:"kotlin",label:"Kotlin",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-kotlin",metastring:'title="BookInputMapper.java"',children:'@Mapper\ninterface BookInputMapper {\n\n    @BeanMapping(unmappedTargetPolicy = ReportingPolicy.IGNORE)\n    // highlight-next-line\n    @Mapping(target = "store.id", source = "storeId")\n    @Mapping(target = "authors", source = "authorIds")\n    fun toBook(input: BookInput): Book\n\n    @BeanMapping(ignoreByDefault = true)\n    @Mapping(target = "id", source = ".")\n    fun toAuthor(id: Long?): Author\n}\n'})})})]}),"\n",(0,i.jsx)(e.h2,{id:"\u4f7f\u7528",children:"\u4f7f\u7528"}),"\n",(0,i.jsxs)(e.p,{children:["\u73b0\u5728\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u628a",(0,i.jsx)(e.code,{children:"BookInput"}),"\u8f6c\u5316\u4e3a",(0,i.jsx)(e.code,{children:"Book"}),"\u4e86"]}),"\n",(0,i.jsxs)(o.A,{groupId:"language",children:[(0,i.jsx)(s.A,{value:"java",label:"Java",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"BookInput input = ...\u7701\u7565...;\nBookInputMapper mapper = Mappers.getMapper(BookInputMapper.class);\nBook book = mapper.toBook(input);\n"})})}),(0,i.jsx)(s.A,{value:"kotlin",label:"Kotlin",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-kotlin",children:"val input: BookInput = ...\u7701\u7565...\nval mapper = Mappers.getMapper(BookInputMapper::class.java)\nval book = mapper.toBook(input)\n"})})})]}),"\n",(0,i.jsx)(e.h2,{id:"\u8ba9pojo\u5b9e\u73b0input\u63a5\u53e3",children:"\u8ba9POJO\u5b9e\u73b0Input\u63a5\u53e3"}),"\n",(0,i.jsxs)(e.p,{children:["Jimmer\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7b80\u5355\u63a5\u53e3\uff0c",(0,i.jsx)(e.code,{children:"org.babyfish.jimmer.Input<E>"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public interface Input<E> {\n\n    E toEntity();\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u52a8\u6001\u5bf9\u8c61\u6c38\u8fdc\u4e0d\u4f1a\u5b9e\u73b0\u6b64\u7ed3\u6784\uff0c\u8be5\u63a5\u53e3\u5e94\u8be5\u7531\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u9759\u6001POJO\u7c7b\u6765\u5b9e\u73b0\u3002\u5176\u529f\u80fd\u975e\u5e38\u7b80\u5355\uff0c\u5c31\u662f\u628a\u5f53\u524d\u9759\u6001POJO\u8f6c\u5316\u4e3a\u52a8\u6001\u5bf9\u8c61\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u8be5\u63a5\u53e3\u53ef\u4ee5\u63d0\u4f9b\u8bed\u6cd5\u5c42\u9762\u7684\u4fbf\u5229\uff0c\u65e0\u8bba\u662f\u5e95\u5c42\u7684",(0,i.jsx)(e.a,{href:"../../mutation/save-command",children:"\u4fdd\u5b58\u6307\u4ee4"}),"\u8fd8\u662f\u4e0a\u5c42\u7684spring-data\u57fa\u63a5\u53e3",(0,i.jsx)(e.code,{children:"JRepository/KRepository"}),"\uff0c\u5176",(0,i.jsx)(e.code,{children:"sava"}),"\u65b9\u6cd5\u90fd\u76f4\u63a5\u63a5\u53d7",(0,i.jsx)(e.code,{children:"Input"}),"\u53c2\u6570\uff0c\u800c\u65e0\u9700\u7528\u6237\u8c03\u7528Mapper\u5b8c\u6210\u8f6c\u5316\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5982\u679c\u60f3\u8981\u8fd9\u4e2a\u8bed\u6cd5\u5c42\u9762\u7684\u4fbf\u5229\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u8ba9POJO\u5b9e\u73b0\u8be5\u63a5\u53e3\uff0c\u4fee\u6539",(0,i.jsx)(e.code,{children:"BookInput"}),"\u7684\u4ee3\u7801\uff0c\u5982\u4e0b"]}),"\n",(0,i.jsxs)(o.A,{groupId:"language",children:[(0,i.jsx)(s.A,{value:"java",label:"Java",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",metastring:'title="BookInput.java"',children:"@Data\npublic class BookInput implements Input<Book> { \u2776\n\n    private static final Converter CONVERTER = \n        Mappers.getMapper(Converter.class);\n\n    ...\u7701\u7565\u79c1\u6709\u5b57\u6bb5...\n\n    @Override\n    public Book toEntity() { \u2777\n        return CONVERTER.toBook(this);\n    }\n\n    @Mapper\n    interface Converter {\n\n        @BeanMapping(unmappedTargetPolicy = ReportingPolicy.IGNORE)\n        Book toBook(BookInput input);\n\n        ...\u7701\u7565\u5176\u4ed6mapstruct\u914d\u7f6e...\n    }\n}\n"})})}),(0,i.jsx)(s.A,{value:"kotlin",label:"Kotlin",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-kotlin",metastring:'title="BookInput.kt"',children:"data class BookInput(\n    ...\u7565...\n): Input<Book> { \u2776\n\n    override fun toEntity(): Book = \u2777\n        CONVERTER.toBook(this)\n\n    @Mapper\n    internal interface Converter { \n\n        @BeanMapping(unmappedTargetPolicy = ReportingPolicy.IGNORE)\n        fun toBook(input: BookInput): Book\n\n        ...\u7701\u7565\u5176\u4ed6mapstruct\u914d\u7f6e...\n    }\n\n    companion object {\n\n        @JvmStatic\n        private val CONVERTER = \n            Mappers.getMapper(Converter::class.java)\n    }\n}\n"})})})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u2776 ",(0,i.jsx)(e.code,{children:"BookInput"}),"\u7c7b\u5b9e\u73b0\u4e86\u63a5\u53e3",(0,i.jsx)(e.code,{children:"org.babyfish.jimmer.Input"})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u2777 \u5b9e\u73b0",(0,i.jsx)(e.code,{children:"Input.toEntity"}),"\u65b9\u6cd5\uff0c\u5229\u7528MapStruct\u628a\u5f53\u524d\u9759\u6001\u7684",(0,i.jsx)(e.code,{children:"Input DTO"}),"\u5bf9\u8c61\u8f6c\u5316\u4e3a\u52a8\u6001\u7684",(0,i.jsx)(e.code,{children:"Book"}),"\u5b9e\u4f53\u5bf9\u8c61\u3002\u8fd9\u662f\u8fd9\u4e2a\u7c7b\u552f\u4e00\u7684\u529f\u80fd"]}),"\n"]}),"\n"]})]})}function m(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(j,{...n})}):j(n)}},64087:(n,e,r)=>{r.d(e,{M:()=>k});var i=r(44586),t=r(31729),o=r(48440),s=r(80421),a=r(57416),l=r(18441),c=r(68999),d=r(43581),p=r(63051),h=r(46831),u=r(28968),j=r(15993),m=r(13407),x=r(67512),g=r(96540),v=r(74848);const k=(0,g.memo)((()=>{const[n,e]=(0,g.useState)((()=>({name:"Learning GraphQL",edition:1,price:45,storeId:1,authorIds:[1,2]}))),r=(0,g.useCallback)((n=>{e((e=>({...e,name:n.target.value})))}),[]),k=(0,g.useCallback)((n=>{e((e=>({...e,edition:n.target.valueAsNumber})))}),[]),I=(0,g.useCallback)((n=>{e((e=>({...e,price:n.target.valueAsNumber})))}),[]),b=(0,g.useCallback)((n=>{let r;const i=n.target.value;r="string"==typeof i?parseInt(i):i,-1===r&&(r=void 0),e((n=>({...n,storeId:r})))}),[]),B=(0,g.useCallback)((n=>{let r=[];console.log(n.target.value);const i=n.target.value;r="string"==typeof i?i.split(",").map((n=>parseInt(n))):i,e((n=>({...n,authorIds:r})))}),[]),{i18n:f}=(0,i.A)(),M=(0,g.useMemo)((()=>"zh"==f.currentLocale||"zh_cn"==f.currentLocale||"zh_CN"==f.currentLocale),[f.currentLocale]),[A,y]=(0,g.useState)(!1),O=(0,g.useCallback)((()=>{y(!0)}),[]),P=(0,g.useCallback)((()=>{y(!1)}),[]);return(0,v.jsxs)(a.A,{elevation:3,style:{padding:"1.5rem",width:500},children:[(0,v.jsxs)(c.A,{spacing:2,children:[(0,v.jsx)("h1",{children:"Book Form"}),(0,v.jsx)(d.A,{label:"Name",value:n.name,onChange:r,error:""===n.name,helperText:""===n.name?"Name is required":""}),(0,v.jsx)(d.A,{label:"Edition",type:"number",value:n.edition,onChange:k}),(0,v.jsx)(d.A,{label:"Price",type:"number",value:n.price,onChange:I}),(0,v.jsxs)(t.A,{fullWidth:!0,children:[(0,v.jsx)(o.A,{id:"store-select-label",children:"Store"}),(0,v.jsxs)(l.A,{labelId:"store-select-label",label:"Authors",value:n.storeId,onChange:b,children:[(0,v.jsx)(s.A,{value:-1,children:"--NONE--"}),(0,v.jsx)(s.A,{value:1,children:"O'REILLY"}),(0,v.jsx)(s.A,{value:2,children:"MANNING"})]})]}),(0,v.jsxs)(t.A,{fullWidth:!0,children:[(0,v.jsx)(o.A,{id:"author-multi-select-label",children:"Authors"}),(0,v.jsxs)(l.A,{multiple:!0,labelId:"author-multi-select-label",label:"Authors",value:n.authorIds,onChange:B,children:[(0,v.jsx)(s.A,{value:1,children:"Eve Procello"}),(0,v.jsx)(s.A,{value:2,children:"Alex Banks"}),(0,v.jsx)(s.A,{value:3,children:"Dan Vanderkam"}),(0,v.jsx)(s.A,{value:4,children:"Boris Cherny"}),(0,v.jsx)(s.A,{value:5,children:"Samer Buna"})]})]}),(0,v.jsx)(t.A,{children:(0,v.jsx)(x.A,{onClick:O,variant:"contained",children:M?"\u63d0\u4ea4":"Submit"})})]}),(0,v.jsxs)(p.A,{open:A,onClose:P,children:[(0,v.jsx)(h.A,{children:M?"\u4fe1\u606f":"Info"}),(0,v.jsx)(u.A,{children:(0,v.jsx)(m.A,{children:M?"\u4ec5\u4f5c\u793a\u8303\uff0c\u65e0\u4efb\u4f55\u6548\u679c":"For demonstration only, without any effect"})}),(0,v.jsx)(j.A,{children:(0,v.jsx)(x.A,{onClick:P,children:"\u5173\u95ed"})})]})]})}))},66971:(n,e,r)=>{r.d(e,{a:()=>m});var i=r(96540),t=r(72774),o=r(63051),s=r(28968),a=r(48875),l=r(44676),c=r(47859),d=r(4671),p=r(99343),h=r(7324),u=r(39781),j=r(74848);const m=(0,i.memo)((n=>{let{open:e,fullScreen:r=!1,title:a,maxWidth:m="md",onClose:g,children:v}=n;const[k,I]=(0,i.useState)(r),b=(0,i.useCallback)((()=>{I((n=>!n))}),[]);return(0,j.jsxs)(o.A,{open:e,onClose:g,fullScreen:k,TransitionComponent:x,maxWidth:m,children:[(0,j.jsx)(t.A,{sx:{position:"relative"},children:(0,j.jsxs)(l.A,{children:[(0,j.jsx)(c.A,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:a}),(0,j.jsx)(d.A,{onClick:b,style:{color:"white"},children:k?(0,j.jsx)(h.A,{}):(0,j.jsx)(p.A,{})}),(0,j.jsx)(d.A,{"aria-label":"close",onClick:g,style:{color:"white"},children:(0,j.jsx)(u.A,{})})]})}),(0,j.jsx)(s.A,{children:v})]})})),x=i.forwardRef((function(n,e){return(0,j.jsx)(a.A,{direction:"up",ref:e,...n})}))},74400:(n,e,r)=>{r.d(e,{l:()=>a});var i=r(96540),t=r(67512),o=r(66971),s=r(74848);const a=(0,i.memo)((n=>{let{buttonText:e,fullScreen:r=!1,title:a=e,variant:l="outlined",maxWidth:c,useOriginalText:d=!0,children:p}=n;const[h,u]=(0,i.useState)(!1),j=(0,i.useCallback)((n=>{u(!0),n.stopPropagation?n.stopPropagation():n.cancelBubble=!0}),[]),m=(0,i.useCallback)((()=>{u(!1)}),[]),x=d?{textTransform:"none"}:{};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.A,{"data-is-view-more-button":"true",onClick:j,variant:l,size:"small",style:x,children:e}),(0,s.jsx)(o.a,{open:h,onClose:m,title:a,maxWidth:c,fullScreen:r,children:p})]})}))}}]);